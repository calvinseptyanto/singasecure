2025-01-27 14:07:03,426 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:07:03,426 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x324bf1bc0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x102334ea0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x10594cae0>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x102aad080>,
  chunking_func_kwargs = {}

2025-01-27 14:07:03,504 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:07:03,504 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:07:03,504 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:07:03,504 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:07:03,505 - lightrag - INFO - Loaded document status storage with 0 records
2025-01-27 14:07:03,505 - lightrag - INFO - Processing 3 new unique documents
2025-01-27 14:07:03,526 - lightrag - ERROR - Failed to process document doc-f65363f31ce69588004093cdc9deb40e: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 401, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:07:03,527 - lightrag - ERROR - Failed to process document doc-fc4172b8e3687bd549241baf9be9166a: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 401, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:07:03,528 - lightrag - ERROR - Failed to process document doc-7be7c8f84d242316ca1e5a6e35fcdbde: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 401, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:10:12,490 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:10:12,490 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x31db11bc0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x102e88ea0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x105194ae0>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x103619080>,
  chunking_func_kwargs = {}

2025-01-27 14:10:12,589 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:10:12,589 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:10:12,589 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:10:12,589 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:10:12,590 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:10:12,590 - lightrag - INFO - All documents have been processed or are duplicates
2025-01-27 14:10:25,988 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:10:25,989 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x32f511bc0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x104844ea0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x107a70ae0>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x104fdd080>,
  chunking_func_kwargs = {}

2025-01-27 14:10:26,068 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:10:26,068 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:10:26,068 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:10:26,068 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:10:26,068 - lightrag - INFO - Loaded document status storage with 0 records
2025-01-27 14:10:26,068 - lightrag - INFO - Processing 3 new unique documents
2025-01-27 14:10:26,094 - lightrag - ERROR - Failed to process document doc-fc4172b8e3687bd549241baf9be9166a: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 401, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:10:26,095 - lightrag - ERROR - Failed to process document doc-f65363f31ce69588004093cdc9deb40e: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 401, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:10:26,095 - lightrag - ERROR - Failed to process document doc-7be7c8f84d242316ca1e5a6e35fcdbde: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 401, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:11:11,123 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:11:11,124 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt2,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x318a15bc0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x104decea0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x108014ae0>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x1054ad080>,
  chunking_func_kwargs = {}

2025-01-27 14:11:11,199 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:11:11,199 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:11:11,199 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:11:11,199 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:11:11,199 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:11:11,199 - lightrag - INFO - All documents have been processed or are duplicates
2025-01-27 14:11:20,737 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:11:20,737 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt2,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x323569bc0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x1008d4ea0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x103a70ae0>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x10106d080>,
  chunking_func_kwargs = {}

2025-01-27 14:11:20,813 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:11:20,813 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:11:20,813 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:11:20,813 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:11:20,813 - lightrag - INFO - Loaded document status storage with 0 records
2025-01-27 14:11:20,813 - lightrag - INFO - Processing 3 new unique documents
2025-01-27 14:11:20,835 - lightrag - ERROR - Failed to process document doc-f65363f31ce69588004093cdc9deb40e: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 401, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:11:20,836 - lightrag - ERROR - Failed to process document doc-fc4172b8e3687bd549241baf9be9166a: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 401, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:11:20,836 - lightrag - ERROR - Failed to process document doc-7be7c8f84d242316ca1e5a6e35fcdbde: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 401, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:20:22,815 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:20:22,815 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x327b25bc0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x104e90ea0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x1075f0ae0>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x105615080>,
  chunking_func_kwargs = {}

2025-01-27 14:20:22,902 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:20:22,902 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:20:22,902 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:20:22,902 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:20:22,903 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:20:22,903 - lightrag - INFO - All documents have been processed or are duplicates
2025-01-27 14:20:56,522 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:20:56,522 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x325509bc0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x102194ea0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x10dc84ae0>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x1031e9080>,
  chunking_func_kwargs = {}

2025-01-27 14:20:56,593 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:20:56,594 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:20:56,594 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:20:56,594 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:20:56,594 - lightrag - INFO - Loaded document status storage with 0 records
2025-01-27 14:20:56,594 - lightrag - INFO - Processing 3 new unique documents
2025-01-27 14:20:56,618 - lightrag - ERROR - Failed to process document doc-fc4172b8e3687bd549241baf9be9166a: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 400, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 77, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 53, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:20:56,619 - lightrag - ERROR - Failed to process document doc-f65363f31ce69588004093cdc9deb40e: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 400, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 77, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 53, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:20:56,619 - lightrag - ERROR - Failed to process document doc-7be7c8f84d242316ca1e5a6e35fcdbde: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 400, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 77, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 53, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:26:09,853 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:26:09,853 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x1321b8220>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x100dade40>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x101afe840>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x1013fea20>,
  chunking_func_kwargs = {}

2025-01-27 14:26:30,469 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:26:30,469 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x12a6b8220>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x1006d9e40>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x103466840>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x1011d6a20>,
  chunking_func_kwargs = {}

2025-01-27 14:26:30,630 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:26:30,630 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:26:30,630 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:26:30,630 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:26:30,631 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:26:30,631 - lightrag - INFO - All documents have been processed or are duplicates
2025-01-27 14:26:42,011 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:26:42,012 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x12f2b4220>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x104d15e40>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x10672a840>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x1054d6a20>,
  chunking_func_kwargs = {}

2025-01-27 14:26:42,144 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:26:42,144 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:26:42,144 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:26:42,144 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:26:42,144 - lightrag - INFO - Loaded document status storage with 0 records
2025-01-27 14:26:42,144 - lightrag - INFO - Processing 3 new unique documents
2025-01-27 14:26:42,159 - lightrag - ERROR - Failed to process document doc-fc4172b8e3687bd549241baf9be9166a: module 'tiktoken' has no attribute 'encoding_for_model'
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 400, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'tiktoken' has no attribute 'encoding_for_model'

2025-01-27 14:26:42,161 - lightrag - ERROR - Failed to process document doc-f65363f31ce69588004093cdc9deb40e: module 'tiktoken' has no attribute 'encoding_for_model'
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 400, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'tiktoken' has no attribute 'encoding_for_model'

2025-01-27 14:26:42,162 - lightrag - ERROR - Failed to process document doc-7be7c8f84d242316ca1e5a6e35fcdbde: module 'tiktoken' has no attribute 'encoding_for_model'
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 400, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'tiktoken' has no attribute 'encoding_for_model'

2025-01-27 14:27:05,616 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:27:05,616 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x132c5d800>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x102ee5e40>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x103e439c0>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x10367ea20>,
  chunking_func_kwargs = {}

2025-01-27 14:27:05,740 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:27:05,740 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:27:05,740 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:27:05,740 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:27:05,740 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:27:05,740 - lightrag - INFO - All documents have been processed or are duplicates
2025-01-27 14:27:29,571 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:27:29,571 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x133d556c0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x1024f1e40>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x10343b9c0>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x102c76a20>,
  chunking_func_kwargs = {}

2025-01-27 14:27:29,714 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:27:29,714 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:27:29,714 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:27:29,714 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:27:29,714 - lightrag - INFO - Loaded document status storage with 0 records
2025-01-27 14:27:29,715 - lightrag - INFO - Processing 3 new unique documents
2025-01-27 14:27:29,730 - lightrag - ERROR - Failed to process document doc-f65363f31ce69588004093cdc9deb40e: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 400, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:27:29,730 - lightrag - ERROR - Failed to process document doc-7be7c8f84d242316ca1e5a6e35fcdbde: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 400, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:27:29,731 - lightrag - ERROR - Failed to process document doc-fc4172b8e3687bd549241baf9be9166a: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/lightrag.py", line 400, in ainsert
    for dp in self.chunking_func(
              ^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/operate.py", line 46, in chunking_by_token_size
    tokens = encode_string_by_tiktoken(content, model_name=tiktoken_model)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/lightrag/utils.py", line 181, in encode_string_by_tiktoken
    ENCODER = tiktoken.encoding_for_model(model_name)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/model.py", line 105, in encoding_for_model
    return get_encoding(encoding_name_for_model(model_name))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 75, in get_encoding
    _find_constructors()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.12/site-packages/tiktoken/registry.py", line 51, in _find_constructors
    raise ValueError(
ValueError: Duplicate encoding name gpt2 in tiktoken plugin tiktoken_ext.openai_public 3

2025-01-27 14:34:15,702 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:34:15,703 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x112e40790>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x10012feb0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x101c2b910>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x100920790>,
  chunking_func_kwargs = {}

2025-01-27 14:34:15,779 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:34:15,779 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:34:15,779 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:34:15,779 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:34:15,779 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:34:15,780 - lightrag - INFO - All documents have been processed or are duplicates
2025-01-27 14:34:32,987 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:34:32,988 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = NetworkXStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x114114790>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x104893eb0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x1063cf910>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x1052cc790>,
  chunking_func_kwargs = {}

2025-01-27 14:34:33,100 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:34:33,101 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:34:33,101 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:34:33,101 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:34:33,101 - lightrag - INFO - Loaded document status storage with 0 records
2025-01-27 14:34:33,101 - lightrag - INFO - Processing 3 new unique documents
2025-01-27 14:34:33,288 - lightrag - INFO - Inserting 1 vectors to chunks
2025-01-27 14:34:34,744 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:34:34,744 - lightrag - DEBUG - Query: -Goal-
Given a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.
Use English as output language.

-Steps-
1. Identify all entities. For each identified entity, extract the following information:
- entity_name: Name of the entity, use same language as input text. If English, capitalized the name.
- entity_type: One of the following types: [organization,person,geo,event,category]
- entity_description: Comprehensive description of the entity's attributes and activities
Format each entity as ("entity"<|><entity_name><|><entity_type><|><entity_description>)

2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.
For each pair of related entities, extract the following information:
- source_entity: name of the source entity, as identified in step 1
- target_entity: name of the target entity, as identified in step 1
- relationship_description: explanation as to why you think the source entity and the target entity are related to each other
- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity
- relationship_keywords: one or more high-level key words that summarize the overarching nature of the relationship, focusing on concepts or themes rather than specific details
Format each relationship as ("relationship"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_keywords><|><relationship_strength>)

3. Identify high-level key words that summarize the main concepts, themes, or topics of the entire text. These should capture the overarching ideas present in the document.
Format the content-level key words as ("content_keywords"<|><high_level_keywords>)

4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.

5. When finished, output <|COMPLETE|>

######################
-Examples-
######################
Example 1:

Entity_types: [person, technology, mission, organization, location]
Text:
while Alex clenched his jaw, the buzz of frustration dull against the backdrop of Taylor's authoritarian certainty. It was this competitive undercurrent that kept him alert, the sense that his and Jordan's shared commitment to discovery was an unspoken rebellion against Cruz's narrowing vision of control and order.

Then Taylor did something unexpected. They paused beside Jordan and, for a moment, observed the device with something akin to reverence. "If this tech can be understood..." Taylor said, their voice quieter, "It could change the game for us. For all of us."

The underlying dismissal earlier seemed to falter, replaced by a glimpse of reluctant respect for the gravity of what lay in their hands. Jordan looked up, and for a fleeting heartbeat, their eyes locked with Taylor's, a wordless clash of wills softening into an uneasy truce.

It was a small transformation, barely perceptible, but one that Alex noted with an inward nod. They had all been brought here by different paths
################
Output:
("entity"<|>"Alex"<|>"person"<|>"Alex is a character who experiences frustration and is observant of the dynamics among other characters.")##
("entity"<|>"Taylor"<|>"person"<|>"Taylor is portrayed with authoritarian certainty and shows a moment of reverence towards a device, indicating a change in perspective.")##
("entity"<|>"Jordan"<|>"person"<|>"Jordan shares a commitment to discovery and has a significant interaction with Taylor regarding a device.")##
("entity"<|>"Cruz"<|>"person"<|>"Cruz is associated with a vision of control and order, influencing the dynamics among other characters.")##
("entity"<|>"The Device"<|>"technology"<|>"The Device is central to the story, with potential game-changing implications, and is revered by Taylor.")##
("relationship"<|>"Alex"<|>"Taylor"<|>"Alex is affected by Taylor's authoritarian certainty and observes changes in Taylor's attitude towards the device."<|>"power dynamics, perspective shift"<|>7)##
("relationship"<|>"Alex"<|>"Jordan"<|>"Alex and Jordan share a commitment to discovery, which contrasts with Cruz's vision."<|>"shared goals, rebellion"<|>6)##
("relationship"<|>"Taylor"<|>"Jordan"<|>"Taylor and Jordan interact directly regarding the device, leading to a moment of mutual respect and an uneasy truce."<|>"conflict resolution, mutual respect"<|>8)##
("relationship"<|>"Jordan"<|>"Cruz"<|>"Jordan's commitment to discovery is in rebellion against Cruz's vision of control and order."<|>"ideological conflict, rebellion"<|>5)##
("relationship"<|>"Taylor"<|>"The Device"<|>"Taylor shows reverence towards the device, indicating its importance and potential impact."<|>"reverence, technological significance"<|>9)##
("content_keywords"<|>"power dynamics, ideological conflict, discovery, rebellion")<|COMPLETE|>
#############################
Example 2:

Entity_types: [person, technology, mission, organization, location]
Text:
They were no longer mere operatives; they had become guardians of a threshold, keepers of a message from a realm beyond stars and stripes. This elevation in their mission could not be shackled by regulations and established protocolsit demanded a new perspective, a new resolve.

Tension threaded through the dialogue of beeps and static as communications with Washington buzzed in the background. The team stood, a portentous air enveloping them. It was clear that the decisions they made in the ensuing hours could redefine humanity's place in the cosmos or condemn them to ignorance and potential peril.

Their connection to the stars solidified, the group moved to address the crystallizing warning, shifting from passive recipients to active participants. Mercer's latter instincts gained precedence the team's mandate had evolved, no longer solely to observe and report but to interact and prepare. A metamorphosis had begun, and Operation: Dulce hummed with the newfound frequency of their daring, a tone set not by the earthly
#############
Output:
("entity"<|>"Washington"<|>"location"<|>"Washington is a location where communications are being received, indicating its importance in the decision-making process.")##
("entity"<|>"Operation: Dulce"<|>"mission"<|>"Operation: Dulce is described as a mission that has evolved to interact and prepare, indicating a significant shift in objectives and activities.")##
("entity"<|>"The team"<|>"organization"<|>"The team is portrayed as a group of individuals who have transitioned from passive observers to active participants in a mission, showing a dynamic change in their role.")##
("relationship"<|>"The team"<|>"Washington"<|>"The team receives communications from Washington, which influences their decision-making process."<|>"decision-making, external influence"<|>7)##
("relationship"<|>"The team"<|>"Operation: Dulce"<|>"The team is directly involved in Operation: Dulce, executing its evolved objectives and activities."<|>"mission evolution, active participation"<|>9)##
("content_keywords"<|>"mission evolution, decision-making, active participation, cosmic significance")<|COMPLETE|>
#############################
Example 3:

Entity_types: [person, role, technology, organization, event, location, concept]
Text:
their voice slicing through the buzz of activity. "Control may be an illusion when facing an intelligence that literally writes its own rules," they stated stoically, casting a watchful eye over the flurry of data.

"It's like it's learning to communicate," offered Sam Rivera from a nearby interface, their youthful energy boding a mix of awe and anxiety. "This gives talking to strangers' a whole new meaning."

Alex surveyed his teameach face a study in concentration, determination, and not a small measure of trepidation. "This might well be our first contact," he acknowledged, "And we need to be ready for whatever answers back."

Together, they stood on the edge of the unknown, forging humanity's response to a message from the heavens. The ensuing silence was palpablea collective introspection about their role in this grand cosmic play, one that could rewrite human history.

The encrypted dialogue continued to unfold, its intricate patterns showing an almost uncanny anticipation
#############
Output:
("entity"<|>"Sam Rivera"<|>"person"<|>"Sam Rivera is a member of a team working on communicating with an unknown intelligence, showing a mix of awe and anxiety.")##
("entity"<|>"Alex"<|>"person"<|>"Alex is the leader of a team attempting first contact with an unknown intelligence, acknowledging the significance of their task.")##
("entity"<|>"Control"<|>"concept"<|>"Control refers to the ability to manage or govern, which is challenged by an intelligence that writes its own rules.")##
("entity"<|>"Intelligence"<|>"concept"<|>"Intelligence here refers to an unknown entity capable of writing its own rules and learning to communicate.")##
("entity"<|>"First Contact"<|>"event"<|>"First Contact is the potential initial communication between humanity and an unknown intelligence.")##
("entity"<|>"Humanity's Response"<|>"event"<|>"Humanity's Response is the collective action taken by Alex's team in response to a message from an unknown intelligence.")##
("relationship"<|>"Sam Rivera"<|>"Intelligence"<|>"Sam Rivera is directly involved in the process of learning to communicate with the unknown intelligence."<|>"communication, learning process"<|>9)##
("relationship"<|>"Alex"<|>"First Contact"<|>"Alex leads the team that might be making the First Contact with the unknown intelligence."<|>"leadership, exploration"<|>10)##
("relationship"<|>"Alex"<|>"Humanity's Response"<|>"Alex and his team are the key figures in Humanity's Response to the unknown intelligence."<|>"collective action, cosmic significance"<|>8)##
("relationship"<|>"Control"<|>"Intelligence"<|>"The concept of Control is challenged by the Intelligence that writes its own rules."<|>"power dynamics, autonomy"<|>7)##
("content_keywords"<|>"first contact, control, communication, cosmic significance")<|COMPLETE|>
#############################

#############################
-Real Data-
######################
Entity_types: organization,person,geo,event,category
Text: The issue at the heart of this case is whether, under current Board law, [Starbucks] was entitled to explicitly reward employees' for not participating in union activity, 'while falsely telling its workers that the federal labor law forced it to take this action, wrote administrative law judge Mara-Louise Anzalone. It was not.
######################
Output:

2025-01-27 14:34:34,745 - lightrag - DEBUG - System prompt: None
2025-01-27 14:34:34,745 - lightrag - DEBUG - Full context:
2025-01-27 14:34:38,619 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:34:38,619 - lightrag - DEBUG - Query: MANY entities were missed in the last extraction.  Add them below using the same format:

2025-01-27 14:34:38,619 - lightrag - DEBUG - System prompt: None
2025-01-27 14:34:38,619 - lightrag - DEBUG - Full context:
2025-01-27 14:34:39,630 - lightrag - DEBUG -  Processed 1 chunks, 7 entities(duplicated), 6 relations(duplicated)
2025-01-27 14:34:39,631 - lightrag - DEBUG - Inserting entities into storage...
2025-01-27 14:34:39,633 - lightrag - DEBUG - Inserting relationships into storage...
2025-01-27 14:34:39,635 - lightrag - INFO - Inserting 7 vectors to entities
2025-01-27 14:34:40,444 - lightrag - INFO - Inserting 6 vectors to relationships
2025-01-27 14:34:41,247 - lightrag - INFO - Writing graph with 7 nodes, 6 edges
2025-01-27 14:34:41,249 - lightrag - INFO - Inserting 1 vectors to chunks
2025-01-27 14:34:41,847 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:34:41,847 - lightrag - DEBUG - Query: -Goal-
Given a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.
Use English as output language.

-Steps-
1. Identify all entities. For each identified entity, extract the following information:
- entity_name: Name of the entity, use same language as input text. If English, capitalized the name.
- entity_type: One of the following types: [organization,person,geo,event,category]
- entity_description: Comprehensive description of the entity's attributes and activities
Format each entity as ("entity"<|><entity_name><|><entity_type><|><entity_description>)

2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.
For each pair of related entities, extract the following information:
- source_entity: name of the source entity, as identified in step 1
- target_entity: name of the target entity, as identified in step 1
- relationship_description: explanation as to why you think the source entity and the target entity are related to each other
- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity
- relationship_keywords: one or more high-level key words that summarize the overarching nature of the relationship, focusing on concepts or themes rather than specific details
Format each relationship as ("relationship"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_keywords><|><relationship_strength>)

3. Identify high-level key words that summarize the main concepts, themes, or topics of the entire text. These should capture the overarching ideas present in the document.
Format the content-level key words as ("content_keywords"<|><high_level_keywords>)

4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.

5. When finished, output <|COMPLETE|>

######################
-Examples-
######################
Example 1:

Entity_types: [person, technology, mission, organization, location]
Text:
while Alex clenched his jaw, the buzz of frustration dull against the backdrop of Taylor's authoritarian certainty. It was this competitive undercurrent that kept him alert, the sense that his and Jordan's shared commitment to discovery was an unspoken rebellion against Cruz's narrowing vision of control and order.

Then Taylor did something unexpected. They paused beside Jordan and, for a moment, observed the device with something akin to reverence. "If this tech can be understood..." Taylor said, their voice quieter, "It could change the game for us. For all of us."

The underlying dismissal earlier seemed to falter, replaced by a glimpse of reluctant respect for the gravity of what lay in their hands. Jordan looked up, and for a fleeting heartbeat, their eyes locked with Taylor's, a wordless clash of wills softening into an uneasy truce.

It was a small transformation, barely perceptible, but one that Alex noted with an inward nod. They had all been brought here by different paths
################
Output:
("entity"<|>"Alex"<|>"person"<|>"Alex is a character who experiences frustration and is observant of the dynamics among other characters.")##
("entity"<|>"Taylor"<|>"person"<|>"Taylor is portrayed with authoritarian certainty and shows a moment of reverence towards a device, indicating a change in perspective.")##
("entity"<|>"Jordan"<|>"person"<|>"Jordan shares a commitment to discovery and has a significant interaction with Taylor regarding a device.")##
("entity"<|>"Cruz"<|>"person"<|>"Cruz is associated with a vision of control and order, influencing the dynamics among other characters.")##
("entity"<|>"The Device"<|>"technology"<|>"The Device is central to the story, with potential game-changing implications, and is revered by Taylor.")##
("relationship"<|>"Alex"<|>"Taylor"<|>"Alex is affected by Taylor's authoritarian certainty and observes changes in Taylor's attitude towards the device."<|>"power dynamics, perspective shift"<|>7)##
("relationship"<|>"Alex"<|>"Jordan"<|>"Alex and Jordan share a commitment to discovery, which contrasts with Cruz's vision."<|>"shared goals, rebellion"<|>6)##
("relationship"<|>"Taylor"<|>"Jordan"<|>"Taylor and Jordan interact directly regarding the device, leading to a moment of mutual respect and an uneasy truce."<|>"conflict resolution, mutual respect"<|>8)##
("relationship"<|>"Jordan"<|>"Cruz"<|>"Jordan's commitment to discovery is in rebellion against Cruz's vision of control and order."<|>"ideological conflict, rebellion"<|>5)##
("relationship"<|>"Taylor"<|>"The Device"<|>"Taylor shows reverence towards the device, indicating its importance and potential impact."<|>"reverence, technological significance"<|>9)##
("content_keywords"<|>"power dynamics, ideological conflict, discovery, rebellion")<|COMPLETE|>
#############################
Example 2:

Entity_types: [person, technology, mission, organization, location]
Text:
They were no longer mere operatives; they had become guardians of a threshold, keepers of a message from a realm beyond stars and stripes. This elevation in their mission could not be shackled by regulations and established protocolsit demanded a new perspective, a new resolve.

Tension threaded through the dialogue of beeps and static as communications with Washington buzzed in the background. The team stood, a portentous air enveloping them. It was clear that the decisions they made in the ensuing hours could redefine humanity's place in the cosmos or condemn them to ignorance and potential peril.

Their connection to the stars solidified, the group moved to address the crystallizing warning, shifting from passive recipients to active participants. Mercer's latter instincts gained precedence the team's mandate had evolved, no longer solely to observe and report but to interact and prepare. A metamorphosis had begun, and Operation: Dulce hummed with the newfound frequency of their daring, a tone set not by the earthly
#############
Output:
("entity"<|>"Washington"<|>"location"<|>"Washington is a location where communications are being received, indicating its importance in the decision-making process.")##
("entity"<|>"Operation: Dulce"<|>"mission"<|>"Operation: Dulce is described as a mission that has evolved to interact and prepare, indicating a significant shift in objectives and activities.")##
("entity"<|>"The team"<|>"organization"<|>"The team is portrayed as a group of individuals who have transitioned from passive observers to active participants in a mission, showing a dynamic change in their role.")##
("relationship"<|>"The team"<|>"Washington"<|>"The team receives communications from Washington, which influences their decision-making process."<|>"decision-making, external influence"<|>7)##
("relationship"<|>"The team"<|>"Operation: Dulce"<|>"The team is directly involved in Operation: Dulce, executing its evolved objectives and activities."<|>"mission evolution, active participation"<|>9)##
("content_keywords"<|>"mission evolution, decision-making, active participation, cosmic significance")<|COMPLETE|>
#############################
Example 3:

Entity_types: [person, role, technology, organization, event, location, concept]
Text:
their voice slicing through the buzz of activity. "Control may be an illusion when facing an intelligence that literally writes its own rules," they stated stoically, casting a watchful eye over the flurry of data.

"It's like it's learning to communicate," offered Sam Rivera from a nearby interface, their youthful energy boding a mix of awe and anxiety. "This gives talking to strangers' a whole new meaning."

Alex surveyed his teameach face a study in concentration, determination, and not a small measure of trepidation. "This might well be our first contact," he acknowledged, "And we need to be ready for whatever answers back."

Together, they stood on the edge of the unknown, forging humanity's response to a message from the heavens. The ensuing silence was palpablea collective introspection about their role in this grand cosmic play, one that could rewrite human history.

The encrypted dialogue continued to unfold, its intricate patterns showing an almost uncanny anticipation
#############
Output:
("entity"<|>"Sam Rivera"<|>"person"<|>"Sam Rivera is a member of a team working on communicating with an unknown intelligence, showing a mix of awe and anxiety.")##
("entity"<|>"Alex"<|>"person"<|>"Alex is the leader of a team attempting first contact with an unknown intelligence, acknowledging the significance of their task.")##
("entity"<|>"Control"<|>"concept"<|>"Control refers to the ability to manage or govern, which is challenged by an intelligence that writes its own rules.")##
("entity"<|>"Intelligence"<|>"concept"<|>"Intelligence here refers to an unknown entity capable of writing its own rules and learning to communicate.")##
("entity"<|>"First Contact"<|>"event"<|>"First Contact is the potential initial communication between humanity and an unknown intelligence.")##
("entity"<|>"Humanity's Response"<|>"event"<|>"Humanity's Response is the collective action taken by Alex's team in response to a message from an unknown intelligence.")##
("relationship"<|>"Sam Rivera"<|>"Intelligence"<|>"Sam Rivera is directly involved in the process of learning to communicate with the unknown intelligence."<|>"communication, learning process"<|>9)##
("relationship"<|>"Alex"<|>"First Contact"<|>"Alex leads the team that might be making the First Contact with the unknown intelligence."<|>"leadership, exploration"<|>10)##
("relationship"<|>"Alex"<|>"Humanity's Response"<|>"Alex and his team are the key figures in Humanity's Response to the unknown intelligence."<|>"collective action, cosmic significance"<|>8)##
("relationship"<|>"Control"<|>"Intelligence"<|>"The concept of Control is challenged by the Intelligence that writes its own rules."<|>"power dynamics, autonomy"<|>7)##
("content_keywords"<|>"first contact, control, communication, cosmic significance")<|COMPLETE|>
#############################

#############################
-Real Data-
######################
Entity_types: organization,person,geo,event,category
Text: of laws and regulations are clear, the evidence is conclusive, the circumstances are serious, and the nature is vile, the statement added.
######################
Output:

2025-01-27 14:34:41,848 - lightrag - DEBUG - System prompt: None
2025-01-27 14:34:41,848 - lightrag - DEBUG - Full context:
2025-01-27 14:34:42,573 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:34:42,573 - lightrag - DEBUG - Query: MANY entities were missed in the last extraction.  Add them below using the same format:

2025-01-27 14:34:42,573 - lightrag - DEBUG - System prompt: None
2025-01-27 14:34:42,573 - lightrag - DEBUG - Full context:
2025-01-27 14:34:43,892 - lightrag - DEBUG -  Processed 1 chunks, 16 entities(duplicated), 7 relations(duplicated)
2025-01-27 14:34:43,893 - lightrag - DEBUG - Inserting entities into storage...
2025-01-27 14:34:43,895 - lightrag - DEBUG - Inserting relationships into storage...
2025-01-27 14:34:43,896 - lightrag - INFO - Inserting 16 vectors to entities
2025-01-27 14:34:44,702 - lightrag - INFO - Inserting 7 vectors to relationships
2025-01-27 14:34:45,532 - lightrag - INFO - Writing graph with 23 nodes, 13 edges
2025-01-27 14:34:45,533 - lightrag - INFO - Inserting 1 vectors to chunks
2025-01-27 14:34:46,350 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:34:46,350 - lightrag - DEBUG - Query: -Goal-
Given a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.
Use English as output language.

-Steps-
1. Identify all entities. For each identified entity, extract the following information:
- entity_name: Name of the entity, use same language as input text. If English, capitalized the name.
- entity_type: One of the following types: [organization,person,geo,event,category]
- entity_description: Comprehensive description of the entity's attributes and activities
Format each entity as ("entity"<|><entity_name><|><entity_type><|><entity_description>)

2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.
For each pair of related entities, extract the following information:
- source_entity: name of the source entity, as identified in step 1
- target_entity: name of the target entity, as identified in step 1
- relationship_description: explanation as to why you think the source entity and the target entity are related to each other
- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity
- relationship_keywords: one or more high-level key words that summarize the overarching nature of the relationship, focusing on concepts or themes rather than specific details
Format each relationship as ("relationship"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_keywords><|><relationship_strength>)

3. Identify high-level key words that summarize the main concepts, themes, or topics of the entire text. These should capture the overarching ideas present in the document.
Format the content-level key words as ("content_keywords"<|><high_level_keywords>)

4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.

5. When finished, output <|COMPLETE|>

######################
-Examples-
######################
Example 1:

Entity_types: [person, technology, mission, organization, location]
Text:
while Alex clenched his jaw, the buzz of frustration dull against the backdrop of Taylor's authoritarian certainty. It was this competitive undercurrent that kept him alert, the sense that his and Jordan's shared commitment to discovery was an unspoken rebellion against Cruz's narrowing vision of control and order.

Then Taylor did something unexpected. They paused beside Jordan and, for a moment, observed the device with something akin to reverence. "If this tech can be understood..." Taylor said, their voice quieter, "It could change the game for us. For all of us."

The underlying dismissal earlier seemed to falter, replaced by a glimpse of reluctant respect for the gravity of what lay in their hands. Jordan looked up, and for a fleeting heartbeat, their eyes locked with Taylor's, a wordless clash of wills softening into an uneasy truce.

It was a small transformation, barely perceptible, but one that Alex noted with an inward nod. They had all been brought here by different paths
################
Output:
("entity"<|>"Alex"<|>"person"<|>"Alex is a character who experiences frustration and is observant of the dynamics among other characters.")##
("entity"<|>"Taylor"<|>"person"<|>"Taylor is portrayed with authoritarian certainty and shows a moment of reverence towards a device, indicating a change in perspective.")##
("entity"<|>"Jordan"<|>"person"<|>"Jordan shares a commitment to discovery and has a significant interaction with Taylor regarding a device.")##
("entity"<|>"Cruz"<|>"person"<|>"Cruz is associated with a vision of control and order, influencing the dynamics among other characters.")##
("entity"<|>"The Device"<|>"technology"<|>"The Device is central to the story, with potential game-changing implications, and is revered by Taylor.")##
("relationship"<|>"Alex"<|>"Taylor"<|>"Alex is affected by Taylor's authoritarian certainty and observes changes in Taylor's attitude towards the device."<|>"power dynamics, perspective shift"<|>7)##
("relationship"<|>"Alex"<|>"Jordan"<|>"Alex and Jordan share a commitment to discovery, which contrasts with Cruz's vision."<|>"shared goals, rebellion"<|>6)##
("relationship"<|>"Taylor"<|>"Jordan"<|>"Taylor and Jordan interact directly regarding the device, leading to a moment of mutual respect and an uneasy truce."<|>"conflict resolution, mutual respect"<|>8)##
("relationship"<|>"Jordan"<|>"Cruz"<|>"Jordan's commitment to discovery is in rebellion against Cruz's vision of control and order."<|>"ideological conflict, rebellion"<|>5)##
("relationship"<|>"Taylor"<|>"The Device"<|>"Taylor shows reverence towards the device, indicating its importance and potential impact."<|>"reverence, technological significance"<|>9)##
("content_keywords"<|>"power dynamics, ideological conflict, discovery, rebellion")<|COMPLETE|>
#############################
Example 2:

Entity_types: [person, technology, mission, organization, location]
Text:
They were no longer mere operatives; they had become guardians of a threshold, keepers of a message from a realm beyond stars and stripes. This elevation in their mission could not be shackled by regulations and established protocolsit demanded a new perspective, a new resolve.

Tension threaded through the dialogue of beeps and static as communications with Washington buzzed in the background. The team stood, a portentous air enveloping them. It was clear that the decisions they made in the ensuing hours could redefine humanity's place in the cosmos or condemn them to ignorance and potential peril.

Their connection to the stars solidified, the group moved to address the crystallizing warning, shifting from passive recipients to active participants. Mercer's latter instincts gained precedence the team's mandate had evolved, no longer solely to observe and report but to interact and prepare. A metamorphosis had begun, and Operation: Dulce hummed with the newfound frequency of their daring, a tone set not by the earthly
#############
Output:
("entity"<|>"Washington"<|>"location"<|>"Washington is a location where communications are being received, indicating its importance in the decision-making process.")##
("entity"<|>"Operation: Dulce"<|>"mission"<|>"Operation: Dulce is described as a mission that has evolved to interact and prepare, indicating a significant shift in objectives and activities.")##
("entity"<|>"The team"<|>"organization"<|>"The team is portrayed as a group of individuals who have transitioned from passive observers to active participants in a mission, showing a dynamic change in their role.")##
("relationship"<|>"The team"<|>"Washington"<|>"The team receives communications from Washington, which influences their decision-making process."<|>"decision-making, external influence"<|>7)##
("relationship"<|>"The team"<|>"Operation: Dulce"<|>"The team is directly involved in Operation: Dulce, executing its evolved objectives and activities."<|>"mission evolution, active participation"<|>9)##
("content_keywords"<|>"mission evolution, decision-making, active participation, cosmic significance")<|COMPLETE|>
#############################
Example 3:

Entity_types: [person, role, technology, organization, event, location, concept]
Text:
their voice slicing through the buzz of activity. "Control may be an illusion when facing an intelligence that literally writes its own rules," they stated stoically, casting a watchful eye over the flurry of data.

"It's like it's learning to communicate," offered Sam Rivera from a nearby interface, their youthful energy boding a mix of awe and anxiety. "This gives talking to strangers' a whole new meaning."

Alex surveyed his teameach face a study in concentration, determination, and not a small measure of trepidation. "This might well be our first contact," he acknowledged, "And we need to be ready for whatever answers back."

Together, they stood on the edge of the unknown, forging humanity's response to a message from the heavens. The ensuing silence was palpablea collective introspection about their role in this grand cosmic play, one that could rewrite human history.

The encrypted dialogue continued to unfold, its intricate patterns showing an almost uncanny anticipation
#############
Output:
("entity"<|>"Sam Rivera"<|>"person"<|>"Sam Rivera is a member of a team working on communicating with an unknown intelligence, showing a mix of awe and anxiety.")##
("entity"<|>"Alex"<|>"person"<|>"Alex is the leader of a team attempting first contact with an unknown intelligence, acknowledging the significance of their task.")##
("entity"<|>"Control"<|>"concept"<|>"Control refers to the ability to manage or govern, which is challenged by an intelligence that writes its own rules.")##
("entity"<|>"Intelligence"<|>"concept"<|>"Intelligence here refers to an unknown entity capable of writing its own rules and learning to communicate.")##
("entity"<|>"First Contact"<|>"event"<|>"First Contact is the potential initial communication between humanity and an unknown intelligence.")##
("entity"<|>"Humanity's Response"<|>"event"<|>"Humanity's Response is the collective action taken by Alex's team in response to a message from an unknown intelligence.")##
("relationship"<|>"Sam Rivera"<|>"Intelligence"<|>"Sam Rivera is directly involved in the process of learning to communicate with the unknown intelligence."<|>"communication, learning process"<|>9)##
("relationship"<|>"Alex"<|>"First Contact"<|>"Alex leads the team that might be making the First Contact with the unknown intelligence."<|>"leadership, exploration"<|>10)##
("relationship"<|>"Alex"<|>"Humanity's Response"<|>"Alex and his team are the key figures in Humanity's Response to the unknown intelligence."<|>"collective action, cosmic significance"<|>8)##
("relationship"<|>"Control"<|>"Intelligence"<|>"The concept of Control is challenged by the Intelligence that writes its own rules."<|>"power dynamics, autonomy"<|>7)##
("content_keywords"<|>"first contact, control, communication, cosmic significance")<|COMPLETE|>
#############################

#############################
-Real Data-
######################
Entity_types: organization,person,geo,event,category
Text: The Cyberspace Administration of China (CAC) said in a statement that the firm had breached the country's cybersecurity law, data security law, and personal information protection law.
'The facts of violations of laws and regulations are clear, the evidence is conclusive, the circumstances are serious, and the nature is vile, the statement added.
######################
Output:

2025-01-27 14:34:46,350 - lightrag - DEBUG - System prompt: None
2025-01-27 14:34:46,350 - lightrag - DEBUG - Full context:
2025-01-27 14:34:52,560 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:34:52,560 - lightrag - DEBUG - Query: MANY entities were missed in the last extraction.  Add them below using the same format:

2025-01-27 14:34:52,560 - lightrag - DEBUG - System prompt: None
2025-01-27 14:34:52,561 - lightrag - DEBUG - Full context:
2025-01-27 14:34:53,552 - lightrag - DEBUG -  Processed 1 chunks, 7 entities(duplicated), 5 relations(duplicated)
2025-01-27 14:34:53,553 - lightrag - DEBUG - Inserting entities into storage...
2025-01-27 14:34:53,554 - lightrag - DEBUG - Inserting relationships into storage...
2025-01-27 14:34:53,556 - lightrag - INFO - Inserting 7 vectors to entities
2025-01-27 14:34:54,283 - lightrag - INFO - Inserting 5 vectors to relationships
2025-01-27 14:34:54,963 - lightrag - INFO - Writing graph with 29 nodes, 18 edges
2025-01-27 14:35:50,648 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:35:50,648 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = Neo4JStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x11371c790>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x10432beb0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x105c63910>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x105184790>,
  chunking_func_kwargs = {}

2025-01-27 14:35:50,714 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:35:50,714 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:35:50,714 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:35:50,714 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:35:59,864 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:35:59,864 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = Neo4JStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x11d0448b0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x102e8beb0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x1049bf910>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x103ce4790>,
  chunking_func_kwargs = {}

2025-01-27 14:35:59,902 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:35:59,902 - lightrag - INFO - Load KV llm_response_cache with 0 data
2025-01-27 14:35:59,902 - lightrag - INFO - Load KV full_docs with 0 data
2025-01-27 14:35:59,902 - lightrag - INFO - Load KV text_chunks with 0 data
2025-01-27 14:36:04,754 - lightrag - INFO - Connected to neo4j at neo4j+ssc://a58d5521.databases.neo4j.io
2025-01-27 14:36:04,757 - lightrag - INFO - Loaded document status storage with 0 records
2025-01-27 14:36:04,757 - lightrag - INFO - Processing 3 new unique documents
2025-01-27 14:36:04,937 - lightrag - INFO - Inserting 1 vectors to chunks
2025-01-27 14:36:06,266 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:36:06,268 - lightrag - DEBUG - Query: -Goal-
Given a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.
Use English as output language.

-Steps-
1. Identify all entities. For each identified entity, extract the following information:
- entity_name: Name of the entity, use same language as input text. If English, capitalized the name.
- entity_type: One of the following types: [organization,person,geo,event,category]
- entity_description: Comprehensive description of the entity's attributes and activities
Format each entity as ("entity"<|><entity_name><|><entity_type><|><entity_description>)

2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.
For each pair of related entities, extract the following information:
- source_entity: name of the source entity, as identified in step 1
- target_entity: name of the target entity, as identified in step 1
- relationship_description: explanation as to why you think the source entity and the target entity are related to each other
- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity
- relationship_keywords: one or more high-level key words that summarize the overarching nature of the relationship, focusing on concepts or themes rather than specific details
Format each relationship as ("relationship"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_keywords><|><relationship_strength>)

3. Identify high-level key words that summarize the main concepts, themes, or topics of the entire text. These should capture the overarching ideas present in the document.
Format the content-level key words as ("content_keywords"<|><high_level_keywords>)

4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.

5. When finished, output <|COMPLETE|>

######################
-Examples-
######################
Example 1:

Entity_types: [person, technology, mission, organization, location]
Text:
while Alex clenched his jaw, the buzz of frustration dull against the backdrop of Taylor's authoritarian certainty. It was this competitive undercurrent that kept him alert, the sense that his and Jordan's shared commitment to discovery was an unspoken rebellion against Cruz's narrowing vision of control and order.

Then Taylor did something unexpected. They paused beside Jordan and, for a moment, observed the device with something akin to reverence. "If this tech can be understood..." Taylor said, their voice quieter, "It could change the game for us. For all of us."

The underlying dismissal earlier seemed to falter, replaced by a glimpse of reluctant respect for the gravity of what lay in their hands. Jordan looked up, and for a fleeting heartbeat, their eyes locked with Taylor's, a wordless clash of wills softening into an uneasy truce.

It was a small transformation, barely perceptible, but one that Alex noted with an inward nod. They had all been brought here by different paths
################
Output:
("entity"<|>"Alex"<|>"person"<|>"Alex is a character who experiences frustration and is observant of the dynamics among other characters.")##
("entity"<|>"Taylor"<|>"person"<|>"Taylor is portrayed with authoritarian certainty and shows a moment of reverence towards a device, indicating a change in perspective.")##
("entity"<|>"Jordan"<|>"person"<|>"Jordan shares a commitment to discovery and has a significant interaction with Taylor regarding a device.")##
("entity"<|>"Cruz"<|>"person"<|>"Cruz is associated with a vision of control and order, influencing the dynamics among other characters.")##
("entity"<|>"The Device"<|>"technology"<|>"The Device is central to the story, with potential game-changing implications, and is revered by Taylor.")##
("relationship"<|>"Alex"<|>"Taylor"<|>"Alex is affected by Taylor's authoritarian certainty and observes changes in Taylor's attitude towards the device."<|>"power dynamics, perspective shift"<|>7)##
("relationship"<|>"Alex"<|>"Jordan"<|>"Alex and Jordan share a commitment to discovery, which contrasts with Cruz's vision."<|>"shared goals, rebellion"<|>6)##
("relationship"<|>"Taylor"<|>"Jordan"<|>"Taylor and Jordan interact directly regarding the device, leading to a moment of mutual respect and an uneasy truce."<|>"conflict resolution, mutual respect"<|>8)##
("relationship"<|>"Jordan"<|>"Cruz"<|>"Jordan's commitment to discovery is in rebellion against Cruz's vision of control and order."<|>"ideological conflict, rebellion"<|>5)##
("relationship"<|>"Taylor"<|>"The Device"<|>"Taylor shows reverence towards the device, indicating its importance and potential impact."<|>"reverence, technological significance"<|>9)##
("content_keywords"<|>"power dynamics, ideological conflict, discovery, rebellion")<|COMPLETE|>
#############################
Example 2:

Entity_types: [person, technology, mission, organization, location]
Text:
They were no longer mere operatives; they had become guardians of a threshold, keepers of a message from a realm beyond stars and stripes. This elevation in their mission could not be shackled by regulations and established protocolsit demanded a new perspective, a new resolve.

Tension threaded through the dialogue of beeps and static as communications with Washington buzzed in the background. The team stood, a portentous air enveloping them. It was clear that the decisions they made in the ensuing hours could redefine humanity's place in the cosmos or condemn them to ignorance and potential peril.

Their connection to the stars solidified, the group moved to address the crystallizing warning, shifting from passive recipients to active participants. Mercer's latter instincts gained precedence the team's mandate had evolved, no longer solely to observe and report but to interact and prepare. A metamorphosis had begun, and Operation: Dulce hummed with the newfound frequency of their daring, a tone set not by the earthly
#############
Output:
("entity"<|>"Washington"<|>"location"<|>"Washington is a location where communications are being received, indicating its importance in the decision-making process.")##
("entity"<|>"Operation: Dulce"<|>"mission"<|>"Operation: Dulce is described as a mission that has evolved to interact and prepare, indicating a significant shift in objectives and activities.")##
("entity"<|>"The team"<|>"organization"<|>"The team is portrayed as a group of individuals who have transitioned from passive observers to active participants in a mission, showing a dynamic change in their role.")##
("relationship"<|>"The team"<|>"Washington"<|>"The team receives communications from Washington, which influences their decision-making process."<|>"decision-making, external influence"<|>7)##
("relationship"<|>"The team"<|>"Operation: Dulce"<|>"The team is directly involved in Operation: Dulce, executing its evolved objectives and activities."<|>"mission evolution, active participation"<|>9)##
("content_keywords"<|>"mission evolution, decision-making, active participation, cosmic significance")<|COMPLETE|>
#############################
Example 3:

Entity_types: [person, role, technology, organization, event, location, concept]
Text:
their voice slicing through the buzz of activity. "Control may be an illusion when facing an intelligence that literally writes its own rules," they stated stoically, casting a watchful eye over the flurry of data.

"It's like it's learning to communicate," offered Sam Rivera from a nearby interface, their youthful energy boding a mix of awe and anxiety. "This gives talking to strangers' a whole new meaning."

Alex surveyed his teameach face a study in concentration, determination, and not a small measure of trepidation. "This might well be our first contact," he acknowledged, "And we need to be ready for whatever answers back."

Together, they stood on the edge of the unknown, forging humanity's response to a message from the heavens. The ensuing silence was palpablea collective introspection about their role in this grand cosmic play, one that could rewrite human history.

The encrypted dialogue continued to unfold, its intricate patterns showing an almost uncanny anticipation
#############
Output:
("entity"<|>"Sam Rivera"<|>"person"<|>"Sam Rivera is a member of a team working on communicating with an unknown intelligence, showing a mix of awe and anxiety.")##
("entity"<|>"Alex"<|>"person"<|>"Alex is the leader of a team attempting first contact with an unknown intelligence, acknowledging the significance of their task.")##
("entity"<|>"Control"<|>"concept"<|>"Control refers to the ability to manage or govern, which is challenged by an intelligence that writes its own rules.")##
("entity"<|>"Intelligence"<|>"concept"<|>"Intelligence here refers to an unknown entity capable of writing its own rules and learning to communicate.")##
("entity"<|>"First Contact"<|>"event"<|>"First Contact is the potential initial communication between humanity and an unknown intelligence.")##
("entity"<|>"Humanity's Response"<|>"event"<|>"Humanity's Response is the collective action taken by Alex's team in response to a message from an unknown intelligence.")##
("relationship"<|>"Sam Rivera"<|>"Intelligence"<|>"Sam Rivera is directly involved in the process of learning to communicate with the unknown intelligence."<|>"communication, learning process"<|>9)##
("relationship"<|>"Alex"<|>"First Contact"<|>"Alex leads the team that might be making the First Contact with the unknown intelligence."<|>"leadership, exploration"<|>10)##
("relationship"<|>"Alex"<|>"Humanity's Response"<|>"Alex and his team are the key figures in Humanity's Response to the unknown intelligence."<|>"collective action, cosmic significance"<|>8)##
("relationship"<|>"Control"<|>"Intelligence"<|>"The concept of Control is challenged by the Intelligence that writes its own rules."<|>"power dynamics, autonomy"<|>7)##
("content_keywords"<|>"first contact, control, communication, cosmic significance")<|COMPLETE|>
#############################

#############################
-Real Data-
######################
Entity_types: organization,person,geo,event,category
Text: of laws and regulations are clear, the evidence is conclusive, the circumstances are serious, and the nature is vile, the statement added.
######################
Output:

2025-01-27 14:36:06,268 - lightrag - DEBUG - System prompt: None
2025-01-27 14:36:06,268 - lightrag - DEBUG - Full context:
2025-01-27 14:36:07,991 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:36:07,991 - lightrag - DEBUG - Query: MANY entities were missed in the last extraction.  Add them below using the same format:

2025-01-27 14:36:07,992 - lightrag - DEBUG - System prompt: None
2025-01-27 14:36:07,992 - lightrag - DEBUG - Full context:
2025-01-27 14:36:10,090 - lightrag - DEBUG -  Processed 1 chunks, 16 entities(duplicated), 7 relations(duplicated)
2025-01-27 14:36:10,091 - lightrag - DEBUG - Inserting entities into storage...
2025-01-27 14:36:10,657 - lightrag - DEBUG - Upserted node with label 'THE' and properties: {'entity_type': '"CATEGORY"', 'description': '"the is a definite article, used to specify a particular entity or concept."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,658 - lightrag - DEBUG - Upserted node with label 'LAWS AND REGULATIONS' and properties: {'entity_type': '"CATEGORY"', 'description': '"laws and regulations are mentioned as clear, indicating their importance in the context."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,658 - lightrag - DEBUG - Upserted node with label 'CONCLUSIVE' and properties: {'entity_type': '"CATEGORY"', 'description': '"conclusive is an adjective, used to describe the evidence."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,659 - lightrag - DEBUG - Upserted node with label 'STATEMENT' and properties: {'entity_type': '"CATEGORY"', 'description': '"statement is the source of the information, indicating its importance in the context."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,659 - lightrag - DEBUG - Upserted node with label 'LAWS' and properties: {'entity_type': '"CATEGORY"', 'description': '"laws are a type of regulation, indicating their importance in the context."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,789 - lightrag - DEBUG - Upserted node with label 'REGULATIONS' and properties: {'entity_type': '"CATEGORY"', 'description': '"regulations are a type of rule, indicating their importance in the context."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,790 - lightrag - DEBUG - Upserted node with label 'CLEAR' and properties: {'entity_type': '"CATEGORY"', 'description': '"clear is an adjective, used to describe the laws and regulations."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,790 - lightrag - DEBUG - Upserted node with label 'CIRCUMSTANCES' and properties: {'entity_type': '"CATEGORY"', 'description': '"circumstances are a type of situation, indicating their importance in the context."<SEP>"circumstances are portrayed as serious, indicating their gravity and importance."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,791 - lightrag - DEBUG - Upserted node with label 'NATURE' and properties: {'entity_type': '"CATEGORY"', 'description': '"nature is a type of quality, indicating its importance in the context."<SEP>"nature is described as vile, indicating its negative and undesirable quality."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,792 - lightrag - DEBUG - Upserted node with label 'IS' and properties: {'entity_type': '"CATEGORY"', 'description': '"is a verb, used to indicate existence or presence."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,792 - lightrag - DEBUG - Upserted node with label 'ADDED' and properties: {'entity_type': '"CATEGORY"', 'description': '"added is an action that occurred, indicating a change or update."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,792 - lightrag - DEBUG - Upserted node with label 'VILE' and properties: {'entity_type': '"CATEGORY"', 'description': '"vile is an adjective, used to describe the nature."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,793 - lightrag - DEBUG - Upserted node with label 'OF' and properties: {'entity_type': '"CATEGORY"', 'description': '"of is a preposition, used to indicate a relationship between entities."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,793 - lightrag - DEBUG - Upserted node with label 'SERIOUS' and properties: {'entity_type': '"CATEGORY"', 'description': '"serious is an adjective, used to describe the circumstances."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,793 - lightrag - DEBUG - Upserted node with label 'EVIDENCE' and properties: {'entity_type': '"CATEGORY"', 'description': '"evidence is a type of proof, indicating its importance in the context."<SEP>"evidence is described as conclusive, indicating its reliability and significance."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,793 - lightrag - DEBUG - Upserted node with label 'ARE' and properties: {'entity_type': '"CATEGORY"', 'description': '"are is a verb, used to indicate existence or presence."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:10,853 - lightrag - DEBUG - Inserting relationships into storage...
2025-01-27 14:36:10,971 - lightrag - DEBUG - has_edge:query:MATCH (a:`CIRCUMSTANCES`)-[r]-(b:`STATEMENT`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:36:10,972 - lightrag - DEBUG - has_edge:query:MATCH (a:`CIRCUMSTANCES`)-[r]-(b:`EVIDENCE`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:36:10,975 - lightrag - DEBUG - has_edge:query:MATCH (a:`NATURE`)-[r]-(b:`STATEMENT`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:36:11,045 - lightrag - DEBUG - has_edge:query:MATCH (a:`EVIDENCE`)-[r]-(b:`LAWS AND REGULATIONS`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:36:11,048 - lightrag - DEBUG - has_edge:query:MATCH (a:`CIRCUMSTANCES`)-[r]-(b:`NATURE`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:36:11,050 - lightrag - DEBUG - has_edge:query:MATCH (a:`LAWS AND REGULATIONS`)-[r]-(b:`STATEMENT`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:36:11,052 - lightrag - DEBUG - has_edge:query:MATCH (a:`EVIDENCE`)-[r]-(b:`STATEMENT`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:36:11,058 - lightrag - DEBUG - has_node:query:MATCH (n:`CIRCUMSTANCES`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,060 - lightrag - DEBUG - has_node:query:MATCH (n:`CIRCUMSTANCES`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,063 - lightrag - DEBUG - has_node:query:MATCH (n:`NATURE`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,071 - lightrag - DEBUG - has_node:query:MATCH (n:`EVIDENCE`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,072 - lightrag - DEBUG - has_node:query:MATCH (n:`EVIDENCE`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,073 - lightrag - DEBUG - has_node:query:MATCH (n:`LAWS AND REGULATIONS`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,077 - lightrag - DEBUG - has_node:query:MATCH (n:`EVIDENCE`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,143 - lightrag - DEBUG - has_node:query:MATCH (n:`CIRCUMSTANCES`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,150 - lightrag - DEBUG - has_node:query:MATCH (n:`STATEMENT`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,152 - lightrag - DEBUG - has_node:query:MATCH (n:`STATEMENT`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,153 - lightrag - DEBUG - has_node:query:MATCH (n:`STATEMENT`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,157 - lightrag - DEBUG - has_node:query:MATCH (n:`STATEMENT`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,160 - lightrag - DEBUG - has_node:query:MATCH (n:`LAWS AND REGULATIONS`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,180 - lightrag - DEBUG - has_node:query:MATCH (n:`NATURE`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:36:11,316 - lightrag - DEBUG - Upserted edge from 'CIRCUMSTANCES' to 'STATEMENT' with properties: {'weight': 9.0, 'description': '"The statement is related to the circumstances, indicating a connection between the two."', 'keywords': '"cause and effect, evidence-based"', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:11,317 - lightrag - DEBUG - Upserted edge from 'CIRCUMSTANCES' to 'EVIDENCE' with properties: {'weight': 14.0, 'description': '"The conclusive evidence is related to the serious circumstances, indicating a connection between the two."<SEP>"The evidence is related to the circumstances, indicating a connection between the two."', 'keywords': '"cause and effect, evidence-based"', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:11,317 - lightrag - DEBUG - Upserted edge from 'EVIDENCE' to 'STATEMENT' with properties: {'weight': 7.0, 'description': '"The statement is related to the evidence, indicating a connection between the two."', 'keywords': '"cause and effect, evidence-based"', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:11,317 - lightrag - DEBUG - Upserted edge from 'NATURE' to 'STATEMENT' with properties: {'weight': 8.0, 'description': '"The statement is related to the nature, indicating a connection between the two."', 'keywords': '"cause and effect, evidence-based"', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:11,317 - lightrag - DEBUG - Upserted edge from 'LAWS AND REGULATIONS' to 'STATEMENT' with properties: {'weight': 8.0, 'description': '"The statement is related to the laws and regulations, indicating a connection between the two."', 'keywords': '"cause and effect, evidence-based"', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:11,318 - lightrag - DEBUG - Upserted edge from 'EVIDENCE' to 'LAWS AND REGULATIONS' with properties: {'weight': 16.0, 'description': '"Laws and regulations are based on the conclusive evidence, indicating a causal relationship."<SEP>"The laws and regulations are based on the evidence, indicating a causal relationship."', 'keywords': '"cause and effect, evidence-based"', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:11,364 - lightrag - DEBUG - Upserted edge from 'CIRCUMSTANCES' to 'NATURE' with properties: {'weight': 18.0, 'description': '"The circumstances are related to the nature, indicating a causal relationship."<SEP>"The serious circumstances are related to the vile nature, indicating a causal relationship."', 'keywords': '"cause and effect, evidence-based"', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:36:11,457 - lightrag - INFO - Inserting 16 vectors to entities
2025-01-27 14:36:12,523 - lightrag - INFO - Inserting 7 vectors to relationships
2025-01-27 14:36:13,310 - lightrag - INFO - Inserting 1 vectors to chunks
2025-01-27 14:36:13,928 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:36:13,928 - lightrag - DEBUG - Query: -Goal-
Given a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.
Use English as output language.

-Steps-
1. Identify all entities. For each identified entity, extract the following information:
- entity_name: Name of the entity, use same language as input text. If English, capitalized the name.
- entity_type: One of the following types: [organization,person,geo,event,category]
- entity_description: Comprehensive description of the entity's attributes and activities
Format each entity as ("entity"<|><entity_name><|><entity_type><|><entity_description>)

2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.
For each pair of related entities, extract the following information:
- source_entity: name of the source entity, as identified in step 1
- target_entity: name of the target entity, as identified in step 1
- relationship_description: explanation as to why you think the source entity and the target entity are related to each other
- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity
- relationship_keywords: one or more high-level key words that summarize the overarching nature of the relationship, focusing on concepts or themes rather than specific details
Format each relationship as ("relationship"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_keywords><|><relationship_strength>)

3. Identify high-level key words that summarize the main concepts, themes, or topics of the entire text. These should capture the overarching ideas present in the document.
Format the content-level key words as ("content_keywords"<|><high_level_keywords>)

4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.

5. When finished, output <|COMPLETE|>

######################
-Examples-
######################
Example 1:

Entity_types: [person, technology, mission, organization, location]
Text:
while Alex clenched his jaw, the buzz of frustration dull against the backdrop of Taylor's authoritarian certainty. It was this competitive undercurrent that kept him alert, the sense that his and Jordan's shared commitment to discovery was an unspoken rebellion against Cruz's narrowing vision of control and order.

Then Taylor did something unexpected. They paused beside Jordan and, for a moment, observed the device with something akin to reverence. "If this tech can be understood..." Taylor said, their voice quieter, "It could change the game for us. For all of us."

The underlying dismissal earlier seemed to falter, replaced by a glimpse of reluctant respect for the gravity of what lay in their hands. Jordan looked up, and for a fleeting heartbeat, their eyes locked with Taylor's, a wordless clash of wills softening into an uneasy truce.

It was a small transformation, barely perceptible, but one that Alex noted with an inward nod. They had all been brought here by different paths
################
Output:
("entity"<|>"Alex"<|>"person"<|>"Alex is a character who experiences frustration and is observant of the dynamics among other characters.")##
("entity"<|>"Taylor"<|>"person"<|>"Taylor is portrayed with authoritarian certainty and shows a moment of reverence towards a device, indicating a change in perspective.")##
("entity"<|>"Jordan"<|>"person"<|>"Jordan shares a commitment to discovery and has a significant interaction with Taylor regarding a device.")##
("entity"<|>"Cruz"<|>"person"<|>"Cruz is associated with a vision of control and order, influencing the dynamics among other characters.")##
("entity"<|>"The Device"<|>"technology"<|>"The Device is central to the story, with potential game-changing implications, and is revered by Taylor.")##
("relationship"<|>"Alex"<|>"Taylor"<|>"Alex is affected by Taylor's authoritarian certainty and observes changes in Taylor's attitude towards the device."<|>"power dynamics, perspective shift"<|>7)##
("relationship"<|>"Alex"<|>"Jordan"<|>"Alex and Jordan share a commitment to discovery, which contrasts with Cruz's vision."<|>"shared goals, rebellion"<|>6)##
("relationship"<|>"Taylor"<|>"Jordan"<|>"Taylor and Jordan interact directly regarding the device, leading to a moment of mutual respect and an uneasy truce."<|>"conflict resolution, mutual respect"<|>8)##
("relationship"<|>"Jordan"<|>"Cruz"<|>"Jordan's commitment to discovery is in rebellion against Cruz's vision of control and order."<|>"ideological conflict, rebellion"<|>5)##
("relationship"<|>"Taylor"<|>"The Device"<|>"Taylor shows reverence towards the device, indicating its importance and potential impact."<|>"reverence, technological significance"<|>9)##
("content_keywords"<|>"power dynamics, ideological conflict, discovery, rebellion")<|COMPLETE|>
#############################
Example 2:

Entity_types: [person, technology, mission, organization, location]
Text:
They were no longer mere operatives; they had become guardians of a threshold, keepers of a message from a realm beyond stars and stripes. This elevation in their mission could not be shackled by regulations and established protocolsit demanded a new perspective, a new resolve.

Tension threaded through the dialogue of beeps and static as communications with Washington buzzed in the background. The team stood, a portentous air enveloping them. It was clear that the decisions they made in the ensuing hours could redefine humanity's place in the cosmos or condemn them to ignorance and potential peril.

Their connection to the stars solidified, the group moved to address the crystallizing warning, shifting from passive recipients to active participants. Mercer's latter instincts gained precedence the team's mandate had evolved, no longer solely to observe and report but to interact and prepare. A metamorphosis had begun, and Operation: Dulce hummed with the newfound frequency of their daring, a tone set not by the earthly
#############
Output:
("entity"<|>"Washington"<|>"location"<|>"Washington is a location where communications are being received, indicating its importance in the decision-making process.")##
("entity"<|>"Operation: Dulce"<|>"mission"<|>"Operation: Dulce is described as a mission that has evolved to interact and prepare, indicating a significant shift in objectives and activities.")##
("entity"<|>"The team"<|>"organization"<|>"The team is portrayed as a group of individuals who have transitioned from passive observers to active participants in a mission, showing a dynamic change in their role.")##
("relationship"<|>"The team"<|>"Washington"<|>"The team receives communications from Washington, which influences their decision-making process."<|>"decision-making, external influence"<|>7)##
("relationship"<|>"The team"<|>"Operation: Dulce"<|>"The team is directly involved in Operation: Dulce, executing its evolved objectives and activities."<|>"mission evolution, active participation"<|>9)##
("content_keywords"<|>"mission evolution, decision-making, active participation, cosmic significance")<|COMPLETE|>
#############################
Example 3:

Entity_types: [person, role, technology, organization, event, location, concept]
Text:
their voice slicing through the buzz of activity. "Control may be an illusion when facing an intelligence that literally writes its own rules," they stated stoically, casting a watchful eye over the flurry of data.

"It's like it's learning to communicate," offered Sam Rivera from a nearby interface, their youthful energy boding a mix of awe and anxiety. "This gives talking to strangers' a whole new meaning."

Alex surveyed his teameach face a study in concentration, determination, and not a small measure of trepidation. "This might well be our first contact," he acknowledged, "And we need to be ready for whatever answers back."

Together, they stood on the edge of the unknown, forging humanity's response to a message from the heavens. The ensuing silence was palpablea collective introspection about their role in this grand cosmic play, one that could rewrite human history.

The encrypted dialogue continued to unfold, its intricate patterns showing an almost uncanny anticipation
#############
Output:
("entity"<|>"Sam Rivera"<|>"person"<|>"Sam Rivera is a member of a team working on communicating with an unknown intelligence, showing a mix of awe and anxiety.")##
("entity"<|>"Alex"<|>"person"<|>"Alex is the leader of a team attempting first contact with an unknown intelligence, acknowledging the significance of their task.")##
("entity"<|>"Control"<|>"concept"<|>"Control refers to the ability to manage or govern, which is challenged by an intelligence that writes its own rules.")##
("entity"<|>"Intelligence"<|>"concept"<|>"Intelligence here refers to an unknown entity capable of writing its own rules and learning to communicate.")##
("entity"<|>"First Contact"<|>"event"<|>"First Contact is the potential initial communication between humanity and an unknown intelligence.")##
("entity"<|>"Humanity's Response"<|>"event"<|>"Humanity's Response is the collective action taken by Alex's team in response to a message from an unknown intelligence.")##
("relationship"<|>"Sam Rivera"<|>"Intelligence"<|>"Sam Rivera is directly involved in the process of learning to communicate with the unknown intelligence."<|>"communication, learning process"<|>9)##
("relationship"<|>"Alex"<|>"First Contact"<|>"Alex leads the team that might be making the First Contact with the unknown intelligence."<|>"leadership, exploration"<|>10)##
("relationship"<|>"Alex"<|>"Humanity's Response"<|>"Alex and his team are the key figures in Humanity's Response to the unknown intelligence."<|>"collective action, cosmic significance"<|>8)##
("relationship"<|>"Control"<|>"Intelligence"<|>"The concept of Control is challenged by the Intelligence that writes its own rules."<|>"power dynamics, autonomy"<|>7)##
("content_keywords"<|>"first contact, control, communication, cosmic significance")<|COMPLETE|>
#############################

#############################
-Real Data-
######################
Entity_types: organization,person,geo,event,category
Text: The issue at the heart of this case is whether, under current Board law, [Starbucks] was entitled to explicitly reward employees' for not participating in union activity, 'while falsely telling its workers that the federal labor law forced it to take this action, wrote administrative law judge Mara-Louise Anzalone. It was not.
######################
Output:

2025-01-27 14:36:13,928 - lightrag - DEBUG - System prompt: None
2025-01-27 14:36:13,928 - lightrag - DEBUG - Full context:
2025-01-27 14:36:15,013 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:36:15,013 - lightrag - DEBUG - Query: MANY entities were missed in the last extraction.  Add them below using the same format:

2025-01-27 14:36:15,014 - lightrag - DEBUG - System prompt: None
2025-01-27 14:36:15,014 - lightrag - DEBUG - Full context:
2025-01-27 14:36:16,412 - lightrag - DEBUG -  Processed 1 chunks, 7 entities(duplicated), 6 relations(duplicated)
2025-01-27 14:36:16,413 - lightrag - DEBUG - Inserting entities into storage...
2025-01-27 14:36:16,431 - lightrag - ERROR - Failed to process document doc-7be7c8f84d242316ca1e5a6e35fcdbde: Failed to write data to connection IPv4Address(('a58d5521.databases.neo4j.io', 7687)) (ResolvedIPv4Address(('34.126.171.25', 7687)))
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_common.py", line 144, in flush
    await self.socket.sendall(data)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async_compat/network/_bolt_socket.py", line 173, in sendall
    return await self._wait_for_io(io_fut)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async_compat/network/_bolt_socket.py", line 124, in _wait_for_io
    return await wait_for(io_fut, timeout)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async_compat/shims/__init__.py", line 118, in wait_for
    return fut.result()
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/streams.py", line 372, in drain
    await self._protocol._drain_helper()
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/streams.py", line 171, in _drain_helper
    raise ConnectionResetError('Connection lost')
ConnectionResetError: Connection lost

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/lightrag.py", line 466, in ainsert
    raise e
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/lightrag.py", line 425, in ainsert
    maybe_new_kg = await extract_entities(
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/operate.py", line 506, in extract_entities
    all_entities_data.append(await result)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 571, in _wait_for_one
    return f.result()  # May raise f.exception().
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/operate.py", line 190, in _merge_nodes_then_upsert
    already_node = await knowledge_graph_inst.get_node(entity_name)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/kg/neo4j_impl.py", line 140, in get_node
    result = await session.run(query)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/work/session.py", line 327, in run
    await self._auto_result._run(
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/work/result.py", line 230, in _run
    await self._connection.send_all()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_common.py", line 195, in inner
    await coroutine_func(*args, **kwargs)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_bolt.py", line 965, in send_all
    await self._send_all()
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_bolt.py", line 949, in _send_all
    if await self.outbox.flush():
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_common.py", line 150, in flush
    await AsyncUtil.callback(self.on_error, error)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async_compat/util.py", line 74, in callback
    return await res
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_bolt.py", line 1026, in _set_defunct_write
    await self._set_defunct(message, error=error, silent=silent)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_bolt.py", line 1083, in _set_defunct
    raise SessionExpired(message) from error
neo4j.exceptions.SessionExpired: Failed to write data to connection IPv4Address(('a58d5521.databases.neo4j.io', 7687)) (ResolvedIPv4Address(('34.126.171.25', 7687)))

2025-01-27 14:36:16,432 - lightrag - INFO - Inserting 1 vectors to chunks
2025-01-27 14:36:17,067 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:36:17,068 - lightrag - DEBUG - Query: -Goal-
Given a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.
Use English as output language.

-Steps-
1. Identify all entities. For each identified entity, extract the following information:
- entity_name: Name of the entity, use same language as input text. If English, capitalized the name.
- entity_type: One of the following types: [organization,person,geo,event,category]
- entity_description: Comprehensive description of the entity's attributes and activities
Format each entity as ("entity"<|><entity_name><|><entity_type><|><entity_description>)

2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.
For each pair of related entities, extract the following information:
- source_entity: name of the source entity, as identified in step 1
- target_entity: name of the target entity, as identified in step 1
- relationship_description: explanation as to why you think the source entity and the target entity are related to each other
- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity
- relationship_keywords: one or more high-level key words that summarize the overarching nature of the relationship, focusing on concepts or themes rather than specific details
Format each relationship as ("relationship"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_keywords><|><relationship_strength>)

3. Identify high-level key words that summarize the main concepts, themes, or topics of the entire text. These should capture the overarching ideas present in the document.
Format the content-level key words as ("content_keywords"<|><high_level_keywords>)

4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.

5. When finished, output <|COMPLETE|>

######################
-Examples-
######################
Example 1:

Entity_types: [person, technology, mission, organization, location]
Text:
while Alex clenched his jaw, the buzz of frustration dull against the backdrop of Taylor's authoritarian certainty. It was this competitive undercurrent that kept him alert, the sense that his and Jordan's shared commitment to discovery was an unspoken rebellion against Cruz's narrowing vision of control and order.

Then Taylor did something unexpected. They paused beside Jordan and, for a moment, observed the device with something akin to reverence. "If this tech can be understood..." Taylor said, their voice quieter, "It could change the game for us. For all of us."

The underlying dismissal earlier seemed to falter, replaced by a glimpse of reluctant respect for the gravity of what lay in their hands. Jordan looked up, and for a fleeting heartbeat, their eyes locked with Taylor's, a wordless clash of wills softening into an uneasy truce.

It was a small transformation, barely perceptible, but one that Alex noted with an inward nod. They had all been brought here by different paths
################
Output:
("entity"<|>"Alex"<|>"person"<|>"Alex is a character who experiences frustration and is observant of the dynamics among other characters.")##
("entity"<|>"Taylor"<|>"person"<|>"Taylor is portrayed with authoritarian certainty and shows a moment of reverence towards a device, indicating a change in perspective.")##
("entity"<|>"Jordan"<|>"person"<|>"Jordan shares a commitment to discovery and has a significant interaction with Taylor regarding a device.")##
("entity"<|>"Cruz"<|>"person"<|>"Cruz is associated with a vision of control and order, influencing the dynamics among other characters.")##
("entity"<|>"The Device"<|>"technology"<|>"The Device is central to the story, with potential game-changing implications, and is revered by Taylor.")##
("relationship"<|>"Alex"<|>"Taylor"<|>"Alex is affected by Taylor's authoritarian certainty and observes changes in Taylor's attitude towards the device."<|>"power dynamics, perspective shift"<|>7)##
("relationship"<|>"Alex"<|>"Jordan"<|>"Alex and Jordan share a commitment to discovery, which contrasts with Cruz's vision."<|>"shared goals, rebellion"<|>6)##
("relationship"<|>"Taylor"<|>"Jordan"<|>"Taylor and Jordan interact directly regarding the device, leading to a moment of mutual respect and an uneasy truce."<|>"conflict resolution, mutual respect"<|>8)##
("relationship"<|>"Jordan"<|>"Cruz"<|>"Jordan's commitment to discovery is in rebellion against Cruz's vision of control and order."<|>"ideological conflict, rebellion"<|>5)##
("relationship"<|>"Taylor"<|>"The Device"<|>"Taylor shows reverence towards the device, indicating its importance and potential impact."<|>"reverence, technological significance"<|>9)##
("content_keywords"<|>"power dynamics, ideological conflict, discovery, rebellion")<|COMPLETE|>
#############################
Example 2:

Entity_types: [person, technology, mission, organization, location]
Text:
They were no longer mere operatives; they had become guardians of a threshold, keepers of a message from a realm beyond stars and stripes. This elevation in their mission could not be shackled by regulations and established protocolsit demanded a new perspective, a new resolve.

Tension threaded through the dialogue of beeps and static as communications with Washington buzzed in the background. The team stood, a portentous air enveloping them. It was clear that the decisions they made in the ensuing hours could redefine humanity's place in the cosmos or condemn them to ignorance and potential peril.

Their connection to the stars solidified, the group moved to address the crystallizing warning, shifting from passive recipients to active participants. Mercer's latter instincts gained precedence the team's mandate had evolved, no longer solely to observe and report but to interact and prepare. A metamorphosis had begun, and Operation: Dulce hummed with the newfound frequency of their daring, a tone set not by the earthly
#############
Output:
("entity"<|>"Washington"<|>"location"<|>"Washington is a location where communications are being received, indicating its importance in the decision-making process.")##
("entity"<|>"Operation: Dulce"<|>"mission"<|>"Operation: Dulce is described as a mission that has evolved to interact and prepare, indicating a significant shift in objectives and activities.")##
("entity"<|>"The team"<|>"organization"<|>"The team is portrayed as a group of individuals who have transitioned from passive observers to active participants in a mission, showing a dynamic change in their role.")##
("relationship"<|>"The team"<|>"Washington"<|>"The team receives communications from Washington, which influences their decision-making process."<|>"decision-making, external influence"<|>7)##
("relationship"<|>"The team"<|>"Operation: Dulce"<|>"The team is directly involved in Operation: Dulce, executing its evolved objectives and activities."<|>"mission evolution, active participation"<|>9)##
("content_keywords"<|>"mission evolution, decision-making, active participation, cosmic significance")<|COMPLETE|>
#############################
Example 3:

Entity_types: [person, role, technology, organization, event, location, concept]
Text:
their voice slicing through the buzz of activity. "Control may be an illusion when facing an intelligence that literally writes its own rules," they stated stoically, casting a watchful eye over the flurry of data.

"It's like it's learning to communicate," offered Sam Rivera from a nearby interface, their youthful energy boding a mix of awe and anxiety. "This gives talking to strangers' a whole new meaning."

Alex surveyed his teameach face a study in concentration, determination, and not a small measure of trepidation. "This might well be our first contact," he acknowledged, "And we need to be ready for whatever answers back."

Together, they stood on the edge of the unknown, forging humanity's response to a message from the heavens. The ensuing silence was palpablea collective introspection about their role in this grand cosmic play, one that could rewrite human history.

The encrypted dialogue continued to unfold, its intricate patterns showing an almost uncanny anticipation
#############
Output:
("entity"<|>"Sam Rivera"<|>"person"<|>"Sam Rivera is a member of a team working on communicating with an unknown intelligence, showing a mix of awe and anxiety.")##
("entity"<|>"Alex"<|>"person"<|>"Alex is the leader of a team attempting first contact with an unknown intelligence, acknowledging the significance of their task.")##
("entity"<|>"Control"<|>"concept"<|>"Control refers to the ability to manage or govern, which is challenged by an intelligence that writes its own rules.")##
("entity"<|>"Intelligence"<|>"concept"<|>"Intelligence here refers to an unknown entity capable of writing its own rules and learning to communicate.")##
("entity"<|>"First Contact"<|>"event"<|>"First Contact is the potential initial communication between humanity and an unknown intelligence.")##
("entity"<|>"Humanity's Response"<|>"event"<|>"Humanity's Response is the collective action taken by Alex's team in response to a message from an unknown intelligence.")##
("relationship"<|>"Sam Rivera"<|>"Intelligence"<|>"Sam Rivera is directly involved in the process of learning to communicate with the unknown intelligence."<|>"communication, learning process"<|>9)##
("relationship"<|>"Alex"<|>"First Contact"<|>"Alex leads the team that might be making the First Contact with the unknown intelligence."<|>"leadership, exploration"<|>10)##
("relationship"<|>"Alex"<|>"Humanity's Response"<|>"Alex and his team are the key figures in Humanity's Response to the unknown intelligence."<|>"collective action, cosmic significance"<|>8)##
("relationship"<|>"Control"<|>"Intelligence"<|>"The concept of Control is challenged by the Intelligence that writes its own rules."<|>"power dynamics, autonomy"<|>7)##
("content_keywords"<|>"first contact, control, communication, cosmic significance")<|COMPLETE|>
#############################

#############################
-Real Data-
######################
Entity_types: organization,person,geo,event,category
Text: The Cyberspace Administration of China (CAC) said in a statement that the firm had breached the country's cybersecurity law, data security law, and personal information protection law.
'The facts of violations of laws and regulations are clear, the evidence is conclusive, the circumstances are serious, and the nature is vile, the statement added.
######################
Output:

2025-01-27 14:36:17,068 - lightrag - DEBUG - System prompt: None
2025-01-27 14:36:17,068 - lightrag - DEBUG - Full context:
2025-01-27 14:36:18,177 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:36:18,177 - lightrag - DEBUG - Query: MANY entities were missed in the last extraction.  Add them below using the same format:

2025-01-27 14:36:18,177 - lightrag - DEBUG - System prompt: None
2025-01-27 14:36:18,177 - lightrag - DEBUG - Full context:
2025-01-27 14:36:19,581 - lightrag - DEBUG -  Processed 1 chunks, 7 entities(duplicated), 5 relations(duplicated)
2025-01-27 14:36:19,582 - lightrag - DEBUG - Inserting entities into storage...
2025-01-27 14:36:19,585 - lightrag - ERROR - Failed to process document doc-f65363f31ce69588004093cdc9deb40e: Unable to retrieve routing information
Traceback (most recent call last):
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/lightrag.py", line 466, in ainsert
    raise e
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/lightrag.py", line 425, in ainsert
    maybe_new_kg = await extract_entities(
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/operate.py", line 506, in extract_entities
    all_entities_data.append(await result)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 571, in _wait_for_one
    return f.result()  # May raise f.exception().
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/operate.py", line 190, in _merge_nodes_then_upsert
    already_node = await knowledge_graph_inst.get_node(entity_name)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/lightrag/kg/neo4j_impl.py", line 140, in get_node
    result = await session.run(query)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/work/session.py", line 313, in run
    await self._connect(self._config.default_access_mode)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/work/session.py", line 136, in _connect
    await super()._connect(
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/work/workspace.py", line 184, in _connect
    self._connection = await self._pool.acquire(**acquire_kwargs_)
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_pool.py", line 1081, in acquire
    await self.ensure_routing_table_is_fresh(
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_pool.py", line 1008, in ensure_routing_table_is_fresh
    await self.update_routing_table(
  File "/Users/dylanlo/Desktop/smu-datathon/.venv/lib/python3.10/site-packages/neo4j/_async/io/_pool.py", line 943, in update_routing_table
    raise ServiceUnavailable("Unable to retrieve routing information")
neo4j.exceptions.ServiceUnavailable: Unable to retrieve routing information

2025-01-27 14:37:27,215 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:37:27,216 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = Neo4JStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x1296448b0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x1042dbeb0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x105e23910>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x104d20790>,
  chunking_func_kwargs = {}

2025-01-27 14:37:27,280 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:37:27,281 - lightrag - INFO - Load KV llm_response_cache with 1 data
2025-01-27 14:37:27,281 - lightrag - INFO - Load KV full_docs with 1 data
2025-01-27 14:37:27,281 - lightrag - INFO - Load KV text_chunks with 1 data
2025-01-27 14:37:27,877 - lightrag - INFO - Connected to neo4j at neo4j+ssc://a58d5521.databases.neo4j.io
2025-01-27 14:37:27,882 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:37:27,882 - lightrag - INFO - Processing 2 new unique documents
2025-01-27 14:37:28,060 - lightrag - INFO - Inserting 1 vectors to chunks
2025-01-27 14:37:29,344 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:37:29,344 - lightrag - DEBUG - Query: -Goal-
Given a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.
Use English as output language.

-Steps-
1. Identify all entities. For each identified entity, extract the following information:
- entity_name: Name of the entity, use same language as input text. If English, capitalized the name.
- entity_type: One of the following types: [organization,person,geo,event,category]
- entity_description: Comprehensive description of the entity's attributes and activities
Format each entity as ("entity"<|><entity_name><|><entity_type><|><entity_description>)

2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.
For each pair of related entities, extract the following information:
- source_entity: name of the source entity, as identified in step 1
- target_entity: name of the target entity, as identified in step 1
- relationship_description: explanation as to why you think the source entity and the target entity are related to each other
- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity
- relationship_keywords: one or more high-level key words that summarize the overarching nature of the relationship, focusing on concepts or themes rather than specific details
Format each relationship as ("relationship"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_keywords><|><relationship_strength>)

3. Identify high-level key words that summarize the main concepts, themes, or topics of the entire text. These should capture the overarching ideas present in the document.
Format the content-level key words as ("content_keywords"<|><high_level_keywords>)

4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.

5. When finished, output <|COMPLETE|>

######################
-Examples-
######################
Example 1:

Entity_types: [person, technology, mission, organization, location]
Text:
while Alex clenched his jaw, the buzz of frustration dull against the backdrop of Taylor's authoritarian certainty. It was this competitive undercurrent that kept him alert, the sense that his and Jordan's shared commitment to discovery was an unspoken rebellion against Cruz's narrowing vision of control and order.

Then Taylor did something unexpected. They paused beside Jordan and, for a moment, observed the device with something akin to reverence. "If this tech can be understood..." Taylor said, their voice quieter, "It could change the game for us. For all of us."

The underlying dismissal earlier seemed to falter, replaced by a glimpse of reluctant respect for the gravity of what lay in their hands. Jordan looked up, and for a fleeting heartbeat, their eyes locked with Taylor's, a wordless clash of wills softening into an uneasy truce.

It was a small transformation, barely perceptible, but one that Alex noted with an inward nod. They had all been brought here by different paths
################
Output:
("entity"<|>"Alex"<|>"person"<|>"Alex is a character who experiences frustration and is observant of the dynamics among other characters.")##
("entity"<|>"Taylor"<|>"person"<|>"Taylor is portrayed with authoritarian certainty and shows a moment of reverence towards a device, indicating a change in perspective.")##
("entity"<|>"Jordan"<|>"person"<|>"Jordan shares a commitment to discovery and has a significant interaction with Taylor regarding a device.")##
("entity"<|>"Cruz"<|>"person"<|>"Cruz is associated with a vision of control and order, influencing the dynamics among other characters.")##
("entity"<|>"The Device"<|>"technology"<|>"The Device is central to the story, with potential game-changing implications, and is revered by Taylor.")##
("relationship"<|>"Alex"<|>"Taylor"<|>"Alex is affected by Taylor's authoritarian certainty and observes changes in Taylor's attitude towards the device."<|>"power dynamics, perspective shift"<|>7)##
("relationship"<|>"Alex"<|>"Jordan"<|>"Alex and Jordan share a commitment to discovery, which contrasts with Cruz's vision."<|>"shared goals, rebellion"<|>6)##
("relationship"<|>"Taylor"<|>"Jordan"<|>"Taylor and Jordan interact directly regarding the device, leading to a moment of mutual respect and an uneasy truce."<|>"conflict resolution, mutual respect"<|>8)##
("relationship"<|>"Jordan"<|>"Cruz"<|>"Jordan's commitment to discovery is in rebellion against Cruz's vision of control and order."<|>"ideological conflict, rebellion"<|>5)##
("relationship"<|>"Taylor"<|>"The Device"<|>"Taylor shows reverence towards the device, indicating its importance and potential impact."<|>"reverence, technological significance"<|>9)##
("content_keywords"<|>"power dynamics, ideological conflict, discovery, rebellion")<|COMPLETE|>
#############################
Example 2:

Entity_types: [person, technology, mission, organization, location]
Text:
They were no longer mere operatives; they had become guardians of a threshold, keepers of a message from a realm beyond stars and stripes. This elevation in their mission could not be shackled by regulations and established protocolsit demanded a new perspective, a new resolve.

Tension threaded through the dialogue of beeps and static as communications with Washington buzzed in the background. The team stood, a portentous air enveloping them. It was clear that the decisions they made in the ensuing hours could redefine humanity's place in the cosmos or condemn them to ignorance and potential peril.

Their connection to the stars solidified, the group moved to address the crystallizing warning, shifting from passive recipients to active participants. Mercer's latter instincts gained precedence the team's mandate had evolved, no longer solely to observe and report but to interact and prepare. A metamorphosis had begun, and Operation: Dulce hummed with the newfound frequency of their daring, a tone set not by the earthly
#############
Output:
("entity"<|>"Washington"<|>"location"<|>"Washington is a location where communications are being received, indicating its importance in the decision-making process.")##
("entity"<|>"Operation: Dulce"<|>"mission"<|>"Operation: Dulce is described as a mission that has evolved to interact and prepare, indicating a significant shift in objectives and activities.")##
("entity"<|>"The team"<|>"organization"<|>"The team is portrayed as a group of individuals who have transitioned from passive observers to active participants in a mission, showing a dynamic change in their role.")##
("relationship"<|>"The team"<|>"Washington"<|>"The team receives communications from Washington, which influences their decision-making process."<|>"decision-making, external influence"<|>7)##
("relationship"<|>"The team"<|>"Operation: Dulce"<|>"The team is directly involved in Operation: Dulce, executing its evolved objectives and activities."<|>"mission evolution, active participation"<|>9)##
("content_keywords"<|>"mission evolution, decision-making, active participation, cosmic significance")<|COMPLETE|>
#############################
Example 3:

Entity_types: [person, role, technology, organization, event, location, concept]
Text:
their voice slicing through the buzz of activity. "Control may be an illusion when facing an intelligence that literally writes its own rules," they stated stoically, casting a watchful eye over the flurry of data.

"It's like it's learning to communicate," offered Sam Rivera from a nearby interface, their youthful energy boding a mix of awe and anxiety. "This gives talking to strangers' a whole new meaning."

Alex surveyed his teameach face a study in concentration, determination, and not a small measure of trepidation. "This might well be our first contact," he acknowledged, "And we need to be ready for whatever answers back."

Together, they stood on the edge of the unknown, forging humanity's response to a message from the heavens. The ensuing silence was palpablea collective introspection about their role in this grand cosmic play, one that could rewrite human history.

The encrypted dialogue continued to unfold, its intricate patterns showing an almost uncanny anticipation
#############
Output:
("entity"<|>"Sam Rivera"<|>"person"<|>"Sam Rivera is a member of a team working on communicating with an unknown intelligence, showing a mix of awe and anxiety.")##
("entity"<|>"Alex"<|>"person"<|>"Alex is the leader of a team attempting first contact with an unknown intelligence, acknowledging the significance of their task.")##
("entity"<|>"Control"<|>"concept"<|>"Control refers to the ability to manage or govern, which is challenged by an intelligence that writes its own rules.")##
("entity"<|>"Intelligence"<|>"concept"<|>"Intelligence here refers to an unknown entity capable of writing its own rules and learning to communicate.")##
("entity"<|>"First Contact"<|>"event"<|>"First Contact is the potential initial communication between humanity and an unknown intelligence.")##
("entity"<|>"Humanity's Response"<|>"event"<|>"Humanity's Response is the collective action taken by Alex's team in response to a message from an unknown intelligence.")##
("relationship"<|>"Sam Rivera"<|>"Intelligence"<|>"Sam Rivera is directly involved in the process of learning to communicate with the unknown intelligence."<|>"communication, learning process"<|>9)##
("relationship"<|>"Alex"<|>"First Contact"<|>"Alex leads the team that might be making the First Contact with the unknown intelligence."<|>"leadership, exploration"<|>10)##
("relationship"<|>"Alex"<|>"Humanity's Response"<|>"Alex and his team are the key figures in Humanity's Response to the unknown intelligence."<|>"collective action, cosmic significance"<|>8)##
("relationship"<|>"Control"<|>"Intelligence"<|>"The concept of Control is challenged by the Intelligence that writes its own rules."<|>"power dynamics, autonomy"<|>7)##
("content_keywords"<|>"first contact, control, communication, cosmic significance")<|COMPLETE|>
#############################

#############################
-Real Data-
######################
Entity_types: organization,person,geo,event,category
Text: The Cyberspace Administration of China (CAC) said in a statement that the firm had breached the country's cybersecurity law, data security law, and personal information protection law.
'The facts of violations of laws and regulations are clear, the evidence is conclusive, the circumstances are serious, and the nature is vile, the statement added.
######################
Output:

2025-01-27 14:37:29,344 - lightrag - DEBUG - System prompt: None
2025-01-27 14:37:29,344 - lightrag - DEBUG - Full context:
2025-01-27 14:37:35,652 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:37:35,652 - lightrag - DEBUG - Query: MANY entities were missed in the last extraction.  Add them below using the same format:

2025-01-27 14:37:35,653 - lightrag - DEBUG - System prompt: None
2025-01-27 14:37:35,653 - lightrag - DEBUG - Full context:
2025-01-27 14:37:36,760 - lightrag - DEBUG -  Processed 1 chunks, 7 entities(duplicated), 5 relations(duplicated)
2025-01-27 14:37:36,761 - lightrag - DEBUG - Inserting entities into storage...
2025-01-27 14:37:37,151 - lightrag - DEBUG - get_node: query: MATCH (n:`STATEMENT`) RETURN n, result: {'entity_type': '"CATEGORY"', 'description': '"statement is the source of the information, indicating its importance in the context."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:37:37,376 - lightrag - DEBUG - Upserted node with label 'STATEMENT' and properties: {'entity_type': '"EVENT"', 'description': '"Statement is an event where the Cyberspace Administration of China (CAC) has announced the firm\'s breach of laws and regulations."<SEP>"statement is the source of the information, indicating its importance in the context."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a<SEP>chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:37,379 - lightrag - DEBUG - Upserted node with label 'CYBERSPACE ADMINISTRATION OF CHINA (CAC)' and properties: {'entity_type': '"ORGANIZATION"', 'description': '"Cyberspace Administration of China (CAC) is an organization that enforces China\'s cybersecurity law, data security law, and personal information protection law."', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:37,381 - lightrag - DEBUG - Upserted node with label 'CYBERSECURITY LAW' and properties: {'entity_type': '"CATEGORY"', 'description': '"Cybersecurity law is a category of law that the firm has breached."', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:37,382 - lightrag - DEBUG - Upserted node with label 'PERSONAL INFORMATION PROTECTION LAW' and properties: {'entity_type': '"CATEGORY"', 'description': '"Personal information protection law is a category of law that the firm has breached."', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:37,382 - lightrag - DEBUG - Upserted node with label 'DATA SECURITY LAW' and properties: {'entity_type': '"CATEGORY"', 'description': '"Data security law is a category of law that the firm has breached."', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:37,382 - lightrag - DEBUG - Upserted node with label 'THE FIRM' and properties: {'entity_type': '"ORGANIZATION"', 'description': '"The firm is an organization that has breached China\'s cybersecurity law, data security law, and personal information protection law."', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:37,518 - lightrag - DEBUG - Upserted node with label 'CHINA' and properties: {'entity_type': '"GEO"', 'description': '"China is the country where the firm has breached the country\'s cybersecurity law, data security law, and personal information protection law."', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:37,753 - lightrag - DEBUG - Inserting relationships into storage...
2025-01-27 14:37:38,055 - lightrag - DEBUG - has_edge:query:MATCH (a:`CYBERSECURITY LAW`)-[r]-(b:`DATA SECURITY LAW`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:38,057 - lightrag - DEBUG - has_edge:query:MATCH (a:`DATA SECURITY LAW`)-[r]-(b:`PERSONAL INFORMATION PROTECTION LAW`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:38,058 - lightrag - DEBUG - has_edge:query:MATCH (a:`CHINA`)-[r]-(b:`THE FIRM`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:38,060 - lightrag - DEBUG - has_edge:query:MATCH (a:`CYBERSPACE ADMINISTRATION OF CHINA (CAC)`)-[r]-(b:`STATEMENT`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:38,061 - lightrag - DEBUG - has_edge:query:MATCH (a:`CYBERSPACE ADMINISTRATION OF CHINA (CAC)`)-[r]-(b:`THE FIRM`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:38,257 - lightrag - DEBUG - has_node:query:MATCH (n:`CHINA`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,258 - lightrag - DEBUG - has_node:query:MATCH (n:`CYBERSPACE ADMINISTRATION OF CHINA (CAC)`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,259 - lightrag - DEBUG - has_node:query:MATCH (n:`CYBERSPACE ADMINISTRATION OF CHINA (CAC)`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,261 - lightrag - DEBUG - has_node:query:MATCH (n:`CYBERSECURITY LAW`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,262 - lightrag - DEBUG - has_node:query:MATCH (n:`DATA SECURITY LAW`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,374 - lightrag - DEBUG - has_node:query:MATCH (n:`PERSONAL INFORMATION PROTECTION LAW`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,377 - lightrag - DEBUG - has_node:query:MATCH (n:`THE FIRM`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,445 - lightrag - DEBUG - has_node:query:MATCH (n:`STATEMENT`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,449 - lightrag - DEBUG - has_node:query:MATCH (n:`THE FIRM`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,450 - lightrag - DEBUG - has_node:query:MATCH (n:`DATA SECURITY LAW`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:38,672 - lightrag - DEBUG - Upserted edge from 'DATA SECURITY LAW' to 'PERSONAL INFORMATION PROTECTION LAW' with properties: {'weight': 6.0, 'description': '"Data security law and Personal information protection law are related categories of law that the firm has breached."', 'keywords': '"related laws, regulatory breach"', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:38,685 - lightrag - DEBUG - Upserted edge from 'CHINA' to 'THE FIRM' with properties: {'weight': 9.0, 'description': '"The firm has breached China\'s cybersecurity law, data security law, and personal information protection law."', 'keywords': '"regulatory breach, country"', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:38,756 - lightrag - DEBUG - Upserted edge from 'CYBERSPACE ADMINISTRATION OF CHINA (CAC)' to 'STATEMENT' with properties: {'weight': 7.0, 'description': '"Cyberspace Administration of China (CAC) has made a Statement announcing the firm\'s breach of laws and regulations."', 'keywords': '"announcement, regulatory breach"', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:38,769 - lightrag - DEBUG - Upserted edge from 'CYBERSECURITY LAW' to 'DATA SECURITY LAW' with properties: {'weight': 6.0, 'description': '"Cybersecurity law and Data security law are related categories of law that the firm has breached."', 'keywords': '"related laws, regulatory breach"', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:38,852 - lightrag - DEBUG - Upserted edge from 'CYBERSPACE ADMINISTRATION OF CHINA (CAC)' to 'THE FIRM' with properties: {'weight': 16.0, 'description': '"Cyberspace Administration of China (CAC) has accused The firm of breaching China\'s cybersecurity law, data security law, and personal information protection law."', 'keywords': '"regulatory breach, accusation"', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:37:38,877 - lightrag - INFO - Inserting 7 vectors to entities
2025-01-27 14:37:39,695 - lightrag - INFO - Inserting 5 vectors to relationships
2025-01-27 14:37:40,355 - lightrag - INFO - Inserting 1 vectors to chunks
2025-01-27 14:37:41,056 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:37:41,056 - lightrag - DEBUG - Query: -Goal-
Given a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.
Use English as output language.

-Steps-
1. Identify all entities. For each identified entity, extract the following information:
- entity_name: Name of the entity, use same language as input text. If English, capitalized the name.
- entity_type: One of the following types: [organization,person,geo,event,category]
- entity_description: Comprehensive description of the entity's attributes and activities
Format each entity as ("entity"<|><entity_name><|><entity_type><|><entity_description>)

2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.
For each pair of related entities, extract the following information:
- source_entity: name of the source entity, as identified in step 1
- target_entity: name of the target entity, as identified in step 1
- relationship_description: explanation as to why you think the source entity and the target entity are related to each other
- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity
- relationship_keywords: one or more high-level key words that summarize the overarching nature of the relationship, focusing on concepts or themes rather than specific details
Format each relationship as ("relationship"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_keywords><|><relationship_strength>)

3. Identify high-level key words that summarize the main concepts, themes, or topics of the entire text. These should capture the overarching ideas present in the document.
Format the content-level key words as ("content_keywords"<|><high_level_keywords>)

4. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.

5. When finished, output <|COMPLETE|>

######################
-Examples-
######################
Example 1:

Entity_types: [person, technology, mission, organization, location]
Text:
while Alex clenched his jaw, the buzz of frustration dull against the backdrop of Taylor's authoritarian certainty. It was this competitive undercurrent that kept him alert, the sense that his and Jordan's shared commitment to discovery was an unspoken rebellion against Cruz's narrowing vision of control and order.

Then Taylor did something unexpected. They paused beside Jordan and, for a moment, observed the device with something akin to reverence. "If this tech can be understood..." Taylor said, their voice quieter, "It could change the game for us. For all of us."

The underlying dismissal earlier seemed to falter, replaced by a glimpse of reluctant respect for the gravity of what lay in their hands. Jordan looked up, and for a fleeting heartbeat, their eyes locked with Taylor's, a wordless clash of wills softening into an uneasy truce.

It was a small transformation, barely perceptible, but one that Alex noted with an inward nod. They had all been brought here by different paths
################
Output:
("entity"<|>"Alex"<|>"person"<|>"Alex is a character who experiences frustration and is observant of the dynamics among other characters.")##
("entity"<|>"Taylor"<|>"person"<|>"Taylor is portrayed with authoritarian certainty and shows a moment of reverence towards a device, indicating a change in perspective.")##
("entity"<|>"Jordan"<|>"person"<|>"Jordan shares a commitment to discovery and has a significant interaction with Taylor regarding a device.")##
("entity"<|>"Cruz"<|>"person"<|>"Cruz is associated with a vision of control and order, influencing the dynamics among other characters.")##
("entity"<|>"The Device"<|>"technology"<|>"The Device is central to the story, with potential game-changing implications, and is revered by Taylor.")##
("relationship"<|>"Alex"<|>"Taylor"<|>"Alex is affected by Taylor's authoritarian certainty and observes changes in Taylor's attitude towards the device."<|>"power dynamics, perspective shift"<|>7)##
("relationship"<|>"Alex"<|>"Jordan"<|>"Alex and Jordan share a commitment to discovery, which contrasts with Cruz's vision."<|>"shared goals, rebellion"<|>6)##
("relationship"<|>"Taylor"<|>"Jordan"<|>"Taylor and Jordan interact directly regarding the device, leading to a moment of mutual respect and an uneasy truce."<|>"conflict resolution, mutual respect"<|>8)##
("relationship"<|>"Jordan"<|>"Cruz"<|>"Jordan's commitment to discovery is in rebellion against Cruz's vision of control and order."<|>"ideological conflict, rebellion"<|>5)##
("relationship"<|>"Taylor"<|>"The Device"<|>"Taylor shows reverence towards the device, indicating its importance and potential impact."<|>"reverence, technological significance"<|>9)##
("content_keywords"<|>"power dynamics, ideological conflict, discovery, rebellion")<|COMPLETE|>
#############################
Example 2:

Entity_types: [person, technology, mission, organization, location]
Text:
They were no longer mere operatives; they had become guardians of a threshold, keepers of a message from a realm beyond stars and stripes. This elevation in their mission could not be shackled by regulations and established protocolsit demanded a new perspective, a new resolve.

Tension threaded through the dialogue of beeps and static as communications with Washington buzzed in the background. The team stood, a portentous air enveloping them. It was clear that the decisions they made in the ensuing hours could redefine humanity's place in the cosmos or condemn them to ignorance and potential peril.

Their connection to the stars solidified, the group moved to address the crystallizing warning, shifting from passive recipients to active participants. Mercer's latter instincts gained precedence the team's mandate had evolved, no longer solely to observe and report but to interact and prepare. A metamorphosis had begun, and Operation: Dulce hummed with the newfound frequency of their daring, a tone set not by the earthly
#############
Output:
("entity"<|>"Washington"<|>"location"<|>"Washington is a location where communications are being received, indicating its importance in the decision-making process.")##
("entity"<|>"Operation: Dulce"<|>"mission"<|>"Operation: Dulce is described as a mission that has evolved to interact and prepare, indicating a significant shift in objectives and activities.")##
("entity"<|>"The team"<|>"organization"<|>"The team is portrayed as a group of individuals who have transitioned from passive observers to active participants in a mission, showing a dynamic change in their role.")##
("relationship"<|>"The team"<|>"Washington"<|>"The team receives communications from Washington, which influences their decision-making process."<|>"decision-making, external influence"<|>7)##
("relationship"<|>"The team"<|>"Operation: Dulce"<|>"The team is directly involved in Operation: Dulce, executing its evolved objectives and activities."<|>"mission evolution, active participation"<|>9)##
("content_keywords"<|>"mission evolution, decision-making, active participation, cosmic significance")<|COMPLETE|>
#############################
Example 3:

Entity_types: [person, role, technology, organization, event, location, concept]
Text:
their voice slicing through the buzz of activity. "Control may be an illusion when facing an intelligence that literally writes its own rules," they stated stoically, casting a watchful eye over the flurry of data.

"It's like it's learning to communicate," offered Sam Rivera from a nearby interface, their youthful energy boding a mix of awe and anxiety. "This gives talking to strangers' a whole new meaning."

Alex surveyed his teameach face a study in concentration, determination, and not a small measure of trepidation. "This might well be our first contact," he acknowledged, "And we need to be ready for whatever answers back."

Together, they stood on the edge of the unknown, forging humanity's response to a message from the heavens. The ensuing silence was palpablea collective introspection about their role in this grand cosmic play, one that could rewrite human history.

The encrypted dialogue continued to unfold, its intricate patterns showing an almost uncanny anticipation
#############
Output:
("entity"<|>"Sam Rivera"<|>"person"<|>"Sam Rivera is a member of a team working on communicating with an unknown intelligence, showing a mix of awe and anxiety.")##
("entity"<|>"Alex"<|>"person"<|>"Alex is the leader of a team attempting first contact with an unknown intelligence, acknowledging the significance of their task.")##
("entity"<|>"Control"<|>"concept"<|>"Control refers to the ability to manage or govern, which is challenged by an intelligence that writes its own rules.")##
("entity"<|>"Intelligence"<|>"concept"<|>"Intelligence here refers to an unknown entity capable of writing its own rules and learning to communicate.")##
("entity"<|>"First Contact"<|>"event"<|>"First Contact is the potential initial communication between humanity and an unknown intelligence.")##
("entity"<|>"Humanity's Response"<|>"event"<|>"Humanity's Response is the collective action taken by Alex's team in response to a message from an unknown intelligence.")##
("relationship"<|>"Sam Rivera"<|>"Intelligence"<|>"Sam Rivera is directly involved in the process of learning to communicate with the unknown intelligence."<|>"communication, learning process"<|>9)##
("relationship"<|>"Alex"<|>"First Contact"<|>"Alex leads the team that might be making the First Contact with the unknown intelligence."<|>"leadership, exploration"<|>10)##
("relationship"<|>"Alex"<|>"Humanity's Response"<|>"Alex and his team are the key figures in Humanity's Response to the unknown intelligence."<|>"collective action, cosmic significance"<|>8)##
("relationship"<|>"Control"<|>"Intelligence"<|>"The concept of Control is challenged by the Intelligence that writes its own rules."<|>"power dynamics, autonomy"<|>7)##
("content_keywords"<|>"first contact, control, communication, cosmic significance")<|COMPLETE|>
#############################

#############################
-Real Data-
######################
Entity_types: organization,person,geo,event,category
Text: The issue at the heart of this case is whether, under current Board law, [Starbucks] was entitled to explicitly reward employees' for not participating in union activity, 'while falsely telling its workers that the federal labor law forced it to take this action, wrote administrative law judge Mara-Louise Anzalone. It was not.
######################
Output:

2025-01-27 14:37:41,056 - lightrag - DEBUG - System prompt: None
2025-01-27 14:37:41,056 - lightrag - DEBUG - Full context:
2025-01-27 14:37:42,513 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:37:42,513 - lightrag - DEBUG - Query: MANY entities were missed in the last extraction.  Add them below using the same format:

2025-01-27 14:37:42,513 - lightrag - DEBUG - System prompt: None
2025-01-27 14:37:42,513 - lightrag - DEBUG - Full context:
2025-01-27 14:37:44,027 - lightrag - DEBUG -  Processed 1 chunks, 7 entities(duplicated), 6 relations(duplicated)
2025-01-27 14:37:44,028 - lightrag - DEBUG - Inserting entities into storage...
2025-01-27 14:37:44,204 - lightrag - DEBUG - Upserted node with label 'MARA-LOUISE ANZALONE' and properties: {'entity_type': '"PERSON"', 'description': '"Mara-Louise Anzalone is an administrative law judge involved in the case regarding Starbucks and union activity."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,204 - lightrag - DEBUG - Upserted node with label 'EMPLOYEES' and properties: {'entity_type': '"PERSON"', 'description': '"employees are the workers at Starbucks who are affected by the labor law case."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,204 - lightrag - DEBUG - Upserted node with label 'UNION ACTIVITY' and properties: {'entity_type': '"CATEGORY"', 'description': '"union activity refers to the actions taken by employees to form or join a labor union."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,258 - lightrag - DEBUG - Upserted node with label 'FEDERAL LABOR LAW' and properties: {'entity_type': '"CATEGORY"', 'description': '"federal labor law is a set of regulations that governs labor practices."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,259 - lightrag - DEBUG - Upserted node with label 'BOARD' and properties: {'entity_type': '"ORGANIZATION"', 'description': '"Board refers to the governing body that oversees labor law."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,259 - lightrag - DEBUG - Upserted node with label 'STARBUCKS' and properties: {'entity_type': '"ORGANIZATION"', 'description': '"Starbucks is a company at the center of a labor law case regarding union activity and employee rewards."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,260 - lightrag - DEBUG - Upserted node with label 'CASE' and properties: {'entity_type': '"EVENT"', 'description': '"case refers to the labor law dispute between Starbucks and its employees."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,273 - lightrag - DEBUG - Inserting relationships into storage...
2025-01-27 14:37:44,435 - lightrag - DEBUG - has_edge:query:MATCH (a:`FEDERAL LABOR LAW`)-[r]-(b:`MARA-LOUISE ANZALONE`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:44,438 - lightrag - DEBUG - has_edge:query:MATCH (a:`BOARD`)-[r]-(b:`UNION ACTIVITY`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:44,439 - lightrag - DEBUG - has_edge:query:MATCH (a:`BOARD`)-[r]-(b:`FEDERAL LABOR LAW`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:44,440 - lightrag - DEBUG - has_edge:query:MATCH (a:`EMPLOYEES`)-[r]-(b:`STARBUCKS`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:44,441 - lightrag - DEBUG - has_edge:query:MATCH (a:`MARA-LOUISE ANZALONE`)-[r]-(b:`UNION ACTIVITY`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:44,442 - lightrag - DEBUG - has_edge:query:MATCH (a:`MARA-LOUISE ANZALONE`)-[r]-(b:`STARBUCKS`) RETURN COUNT(r) > 0 AS edgeExists:result:False
2025-01-27 14:37:44,475 - lightrag - DEBUG - has_node:query:MATCH (n:`FEDERAL LABOR LAW`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,477 - lightrag - DEBUG - has_node:query:MATCH (n:`BOARD`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,483 - lightrag - DEBUG - has_node:query:MATCH (n:`EMPLOYEES`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,484 - lightrag - DEBUG - has_node:query:MATCH (n:`MARA-LOUISE ANZALONE`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,485 - lightrag - DEBUG - has_node:query:MATCH (n:`MARA-LOUISE ANZALONE`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,485 - lightrag - DEBUG - has_node:query:MATCH (n:`BOARD`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,490 - lightrag - DEBUG - has_node:query:MATCH (n:`MARA-LOUISE ANZALONE`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,572 - lightrag - DEBUG - has_node:query:MATCH (n:`STARBUCKS`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,573 - lightrag - DEBUG - has_node:query:MATCH (n:`FEDERAL LABOR LAW`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,577 - lightrag - DEBUG - has_node:query:MATCH (n:`STARBUCKS`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,580 - lightrag - DEBUG - has_node:query:MATCH (n:`UNION ACTIVITY`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,580 - lightrag - DEBUG - has_node:query:MATCH (n:`UNION ACTIVITY`) RETURN count(n) > 0 AS node_exists:result:True
2025-01-27 14:37:44,651 - lightrag - DEBUG - Upserted edge from 'FEDERAL LABOR LAW' to 'MARA-LOUISE ANZALONE' with properties: {'weight': 7.0, 'description': '"Mara-Louise Anzalone is involved in enforcing federal labor law in the case against Starbucks."', 'keywords': '"person, legal enforcement"', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,742 - lightrag - DEBUG - Upserted edge from 'EMPLOYEES' to 'STARBUCKS' with properties: {'weight': 9.0, 'description': '"Starbucks employees are involved in the labor law case regarding union activity."', 'keywords': '"organization, labor dispute"', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,744 - lightrag - DEBUG - Upserted edge from 'BOARD' to 'FEDERAL LABOR LAW' with properties: {'weight': 8.0, 'description': '"The Board oversees federal labor law, which is relevant to the case against Starbucks."', 'keywords': '"organization, regulatory body"', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,757 - lightrag - DEBUG - Upserted edge from 'MARA-LOUISE ANZALONE' to 'UNION ACTIVITY' with properties: {'weight': 6.0, 'description': '"Mara-Louise Anzalone is involved in a case regarding union activity at Starbucks."', 'keywords': '"person, labor dispute"', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,758 - lightrag - DEBUG - Upserted edge from 'BOARD' to 'UNION ACTIVITY' with properties: {'weight': 7.0, 'description': '"The Board is involved in regulating union activity, which is relevant to the case against Starbucks."', 'keywords': '"organization, labor regulation"', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,759 - lightrag - DEBUG - Upserted edge from 'MARA-LOUISE ANZALONE' to 'STARBUCKS' with properties: {'weight': 16.0, 'description': '"Starbucks is the subject of a labor law case decided by Mara-Louise Anzalone."', 'keywords': '"organization, legal case"', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:37:44,788 - lightrag - INFO - Inserting 7 vectors to entities
2025-01-27 14:37:45,447 - lightrag - INFO - Inserting 6 vectors to relationships
2025-01-27 14:38:23,981 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:38:23,981 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = Neo4JStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x12e8448b0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x104b37eb0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x10787b910>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x1056ac790>,
  chunking_func_kwargs = {}

2025-01-27 14:38:24,044 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:38:24,045 - lightrag - INFO - Load KV llm_response_cache with 1 data
2025-01-27 14:38:24,045 - lightrag - INFO - Load KV full_docs with 3 data
2025-01-27 14:38:24,045 - lightrag - INFO - Load KV text_chunks with 3 data
2025-01-27 14:38:24,432 - lightrag - INFO - Connected to neo4j at neo4j+ssc://a58d5521.databases.neo4j.io
2025-01-27 14:38:24,435 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:38:24,435 - lightrag - INFO - All documents have been processed or are duplicates
2025-01-27 14:42:07,068 - lightrag - INFO - Logger initialized for working directory: ./local_neo4jWorkDir
2025-01-27 14:42:07,069 - lightrag - DEBUG - LightRAG init with param:
  working_dir = ./local_neo4jWorkDir,
  embedding_cache_config = {'enabled': False, 'similarity_threshold': 0.95, 'use_llm_check': False},
  kv_storage = JsonKVStorage,
  vector_storage = NanoVectorDBStorage,
  graph_storage = Neo4JStorage,
  log_level = DEBUG,
  chunk_token_size = 1200,
  chunk_overlap_token_size = 100,
  tiktoken_model_name = gpt-4o-mini,
  entity_extract_max_gleaning = 1,
  entity_summary_to_max_tokens = 500,
  node_embedding_algorithm = node2vec,
  node2vec_params = {'dimensions': 1536, 'num_walks': 10, 'walk_length': 40, 'window_size': 2, 'iterations': 3, 'random_seed': 3},
  embedding_func = {'embedding_dim': 768, 'max_token_size': 8192, 'func': <function main.<locals>.<lambda> at 0x1195448b0>, 'concurrent_limit': 16},
  embedding_batch_num = 32,
  embedding_func_max_async = 16,
  llm_model_func = <function llm_model_func at 0x100aafeb0>,
  llm_model_name = meta-llama/Llama-3.2-1B-Instruct,
  llm_model_max_token_size = 32768,
  llm_model_max_async = 16,
  llm_model_kwargs = {},
  vector_db_storage_cls_kwargs = {},
  enable_llm_cache = True,
  enable_llm_cache_for_entity_extract = True,
  addon_params = {},
  convert_response_to_json_func = <function convert_response_to_json at 0x1021cf910>,
  doc_status_storage = JsonDocStatusStorage,
  chunking_func = <function chunking_by_token_size at 0x1012ac790>,
  chunking_func_kwargs = {}

2025-01-27 14:42:07,138 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:42:07,139 - lightrag - INFO - Load KV llm_response_cache with 1 data
2025-01-27 14:42:07,139 - lightrag - INFO - Load KV full_docs with 3 data
2025-01-27 14:42:07,139 - lightrag - INFO - Load KV text_chunks with 3 data
2025-01-27 14:42:07,775 - lightrag - INFO - Connected to neo4j at neo4j+ssc://a58d5521.databases.neo4j.io
2025-01-27 14:42:07,781 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:42:07,781 - lightrag - INFO - All documents have been processed or are duplicates
2025-01-27 14:42:07,793 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:42:07,793 - lightrag - DEBUG - Query: ---Role---

You are a helpful assistant tasked with identifying both high-level and low-level keywords in the user's query and conversation history.

---Goal---

Given the query and conversation history, list both high-level and low-level keywords. High-level keywords focus on overarching concepts or themes, while low-level keywords focus on specific entities, details, or concrete terms.

---Instructions---

- Consider both the current query and relevant conversation history when extracting keywords
- Output the keywords in JSON format
- The JSON should have two keys:
  - "high_level_keywords" for overarching concepts or themes
  - "low_level_keywords" for specific entities or details

######################
-Examples-
######################
Example 1:

Query: "How does international trade influence global economic stability?"
################
Output:
{
  "high_level_keywords": ["International trade", "Global economic stability", "Economic impact"],
  "low_level_keywords": ["Trade agreements", "Tariffs", "Currency exchange", "Imports", "Exports"]
}
#############################
Example 2:

Query: "What are the environmental consequences of deforestation on biodiversity?"
################
Output:
{
  "high_level_keywords": ["Environmental consequences", "Deforestation", "Biodiversity loss"],
  "low_level_keywords": ["Species extinction", "Habitat destruction", "Carbon emissions", "Rainforest", "Ecosystem"]
}
#############################
Example 3:

Query: "What is the role of education in reducing poverty?"
################
Output:
{
  "high_level_keywords": ["Education", "Poverty reduction", "Socioeconomic development"],
  "low_level_keywords": ["School access", "Literacy rates", "Job training", "Income inequality"]
}
#############################

#############################
-Real Data-
######################
Conversation History:


Current Query: What happened to starbucks?
######################
The `Output` should be human text, not unicode characters. Keep the same language as `Query`.
Output:


2025-01-27 14:42:07,794 - lightrag - DEBUG - System prompt: None
2025-01-27 14:42:07,794 - lightrag - DEBUG - Full context:
2025-01-27 14:42:08,594 - lightrag - INFO - Using hybrid mode for query processing
2025-01-27 14:42:10,847 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STARBUCKS`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:10,851 - lightrag - DEBUG - get_node: query: MATCH (n:`STARBUCKS`) RETURN n, result: {'entity_type': '"ORGANIZATION"', 'description': '"Starbucks is a company at the center of a labor law case regarding union activity and employee rewards."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:10,854 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`BOARD`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:10,859 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`BOARD`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:10,876 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`EMPLOYEES`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:1
2025-01-27 14:42:10,877 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`UNION ACTIVITY`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:10,950 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`CASE`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:0
2025-01-27 14:42:10,956 - lightrag - DEBUG - get_node: query: MATCH (n:`EMPLOYEES`) RETURN n, result: {'entity_type': '"PERSON"', 'description': '"employees are the workers at Starbucks who are affected by the labor law case."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:10,962 - lightrag - DEBUG - get_node: query: MATCH (n:`STATEMENT`) RETURN n, result: {'entity_type': '"EVENT"', 'description': '"Statement is an event where the Cyberspace Administration of China (CAC) has announced the firm\'s breach of laws and regulations."<SEP>"statement is the source of the information, indicating its importance in the context."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a<SEP>chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:42:10,971 - lightrag - DEBUG - get_node: query: MATCH (n:`CASE`) RETURN n, result: {'entity_type': '"EVENT"', 'description': '"case refers to the labor law dispute between Starbucks and its employees."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:10,973 - lightrag - DEBUG - get_node: query: MATCH (n:`UNION ACTIVITY`) RETURN n, result: {'entity_type': '"CATEGORY"', 'description': '"union activity refers to the actions taken by employees to form or join a labor union."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:10,973 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`FEDERAL LABOR LAW`)-[r]->(end:`MARA-LOUISE ANZALONE`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"person, legal enforcement"', 'weight': 7.0, 'description': '"Mara-Louise Anzalone is involved in enforcing federal labor law in the case against Starbucks."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:10,978 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`BOARD`)-[r]->(end:`UNION ACTIVITY`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"organization, labor regulation"', 'weight': 7.0, 'description': '"The Board is involved in regulating union activity, which is relevant to the case against Starbucks."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:10,978 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STARBUCKS`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:10,978 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:3
2025-01-27 14:42:11,050 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`MARA-LOUISE ANZALONE`)-[r]->(end:`UNION ACTIVITY`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"person, labor dispute"', 'weight': 6.0, 'description': '"Mara-Louise Anzalone is involved in a case regarding union activity at Starbucks."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,051 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`EMPLOYEES`)-[r]->(end:`STARBUCKS`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"organization, labor dispute"', 'weight': 9.0, 'description': '"Starbucks employees are involved in the labor law case regarding union activity."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,051 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`UNION ACTIVITY`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,051 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:4
2025-01-27 14:42:11,052 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`MARA-LOUISE ANZALONE`)-[r]->(end:`STARBUCKS`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"organization, legal case"', 'weight': 16.0, 'description': '"Starbucks is the subject of a labor law case decided by Mara-Louise Anzalone."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,059 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STATEMENT`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:5
2025-01-27 14:42:11,060 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`MARA-LOUISE ANZALONE`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:3
2025-01-27 14:42:11,061 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`FEDERAL LABOR LAW`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,062 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:4
2025-01-27 14:42:11,062 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`FEDERAL LABOR LAW`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,063 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`EMPLOYEES`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:1
2025-01-27 14:42:11,076 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`MARA-LOUISE ANZALONE`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:3
2025-01-27 14:42:11,077 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`BOARD`)-[r]->(end:`FEDERAL LABOR LAW`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"organization, regulatory body"', 'weight': 8.0, 'description': '"The Board oversees federal labor law, which is relevant to the case against Starbucks."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,077 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`MARA-LOUISE ANZALONE`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:3
2025-01-27 14:42:11,077 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:5
2025-01-27 14:42:11,146 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STARBUCKS`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,146 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:5
2025-01-27 14:42:11,154 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`UNION ACTIVITY`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,154 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:5
2025-01-27 14:42:11,344 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`UNION ACTIVITY`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,367 - lightrag - DEBUG - get_node: query: MATCH (n:`EMPLOYEES`) RETURN n, result: {'entity_type': '"PERSON"', 'description': '"employees are the workers at Starbucks who are affected by the labor law case."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,370 - lightrag - DEBUG - get_node: query: MATCH (n:`EMPLOYEES`) RETURN n, result: {'entity_type': '"PERSON"', 'description': '"employees are the workers at Starbucks who are affected by the labor law case."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,371 - lightrag - DEBUG - get_node: query: MATCH (n:`STARBUCKS`) RETURN n, result: {'entity_type': '"ORGANIZATION"', 'description': '"Starbucks is a company at the center of a labor law case regarding union activity and employee rewards."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,447 - lightrag - DEBUG - get_node: query: MATCH (n:`CYBERSPACE ADMINISTRATION OF CHINA (CAC)`) RETURN n, result: {'entity_type': '"ORGANIZATION"', 'description': '"Cyberspace Administration of China (CAC) is an organization that enforces China\'s cybersecurity law, data security law, and personal information protection law."', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:42:11,447 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`MARA-LOUISE ANZALONE`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:3
2025-01-27 14:42:11,447 - lightrag - DEBUG - get_node: query: MATCH (n:`FEDERAL LABOR LAW`) RETURN n, result: {'entity_type': '"CATEGORY"', 'description': '"federal labor law is a set of regulations that governs labor practices."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,451 - lightrag - DEBUG - get_node: query: MATCH (n:`BOARD`) RETURN n, result: {'entity_type': '"ORGANIZATION"', 'description': '"Board refers to the governing body that oversees labor law."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,473 - lightrag - DEBUG - get_node: query: MATCH (n:`UNION ACTIVITY`) RETURN n, result: {'entity_type': '"CATEGORY"', 'description': '"union activity refers to the actions taken by employees to form or join a labor union."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,474 - lightrag - DEBUG - get_node: query: MATCH (n:`MARA-LOUISE ANZALONE`) RETURN n, result: {'entity_type': '"PERSON"', 'description': '"Mara-Louise Anzalone is an administrative law judge involved in the case regarding Starbucks and union activity."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,479 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`EMPLOYEES`)-[r]->(end:`STARBUCKS`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"organization, labor dispute"', 'weight': 9.0, 'description': '"Starbucks employees are involved in the labor law case regarding union activity."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,479 - lightrag - DEBUG - get_node: query: MATCH (n:`LAWS AND REGULATIONS`) RETURN n, result: {'entity_type': '"CATEGORY"', 'description': '"laws and regulations are mentioned as clear, indicating their importance in the context."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:42:11,487 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`EMPLOYEES`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:1
2025-01-27 14:42:11,561 - lightrag - DEBUG - get_node: query: MATCH (n:`CIRCUMSTANCES`) RETURN n, result: {'entity_type': '"CATEGORY"', 'description': '"circumstances are a type of situation, indicating their importance in the context."<SEP>"circumstances are portrayed as serious, indicating their gravity and importance."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:42:11,561 - lightrag - DEBUG - get_node: query: MATCH (n:`EVIDENCE`) RETURN n, result: {'entity_type': '"CATEGORY"', 'description': '"evidence is a type of proof, indicating its importance in the context."<SEP>"evidence is described as conclusive, indicating its reliability and significance."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:42:11,561 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`BOARD`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,561 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`FEDERAL LABOR LAW`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,561 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STARBUCKS`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,561 - lightrag - DEBUG - get_node: query: MATCH (n:`NATURE`) RETURN n, result: {'entity_type': '"CATEGORY"', 'description': '"nature is a type of quality, indicating its importance in the context."<SEP>"nature is described as vile, indicating its negative and undesirable quality."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:42:11,562 - lightrag - DEBUG - get_node: query: MATCH (n:`MARA-LOUISE ANZALONE`) RETURN n, result: {'entity_type': '"PERSON"', 'description': '"Mara-Louise Anzalone is an administrative law judge involved in the case regarding Starbucks and union activity."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,562 - lightrag - DEBUG - get_node: query: MATCH (n:`BOARD`) RETURN n, result: {'entity_type': '"ORGANIZATION"', 'description': '"Board refers to the governing body that oversees labor law."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,573 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`MARA-LOUISE ANZALONE`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:3
2025-01-27 14:42:11,576 - lightrag - DEBUG - get_node: query: MATCH (n:`STARBUCKS`) RETURN n, result: {'entity_type': '"ORGANIZATION"', 'description': '"Starbucks is a company at the center of a labor law case regarding union activity and employee rewards."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,577 - lightrag - INFO - Global query uses 6 entites, 6 relations, 1 text units
2025-01-27 14:42:11,577 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`EVIDENCE`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:3
2025-01-27 14:42:11,656 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`MARA-LOUISE ANZALONE`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:3
2025-01-27 14:42:11,657 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`UNION ACTIVITY`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,657 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:5
2025-01-27 14:42:11,657 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`LAWS AND REGULATIONS`)-[r]->(end:`STATEMENT`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"cause and effect, evidence-based"', 'weight': 8.0, 'description': '"The statement is related to the laws and regulations, indicating a connection between the two."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:42:11,659 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`BOARD`)-[r]->(end:`UNION ACTIVITY`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"organization, labor regulation"', 'weight': 7.0, 'description': '"The Board is involved in regulating union activity, which is relevant to the case against Starbucks."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,666 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`NATURE`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,671 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`MARA-LOUISE ANZALONE`)-[r]->(end:`UNION ACTIVITY`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"person, labor dispute"', 'weight': 6.0, 'description': '"Mara-Louise Anzalone is involved in a case regarding union activity at Starbucks."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,672 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STARBUCKS`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,672 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:5
2025-01-27 14:42:11,672 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`EMPLOYEES`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:1
2025-01-27 14:42:11,674 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`NATURE`)-[r]->(end:`STATEMENT`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"cause and effect, evidence-based"', 'weight': 8.0, 'description': '"The statement is related to the nature, indicating a connection between the two."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:42:11,745 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`CYBERSPACE ADMINISTRATION OF CHINA (CAC)`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,746 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`EVIDENCE`)-[r]->(end:`STATEMENT`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"cause and effect, evidence-based"', 'weight': 7.0, 'description': '"The statement is related to the evidence, indicating a connection between the two."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:42:11,746 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`CYBERSPACE ADMINISTRATION OF CHINA (CAC)`)-[r]->(end:`STATEMENT`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"announcement, regulatory breach"', 'weight': 7.0, 'description': '"Cyberspace Administration of China (CAC) has made a Statement announcing the firm\'s breach of laws and regulations."', 'source_id': 'chunk-f65363f31ce69588004093cdc9deb40e'}
2025-01-27 14:42:11,749 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STATEMENT`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:5
2025-01-27 14:42:11,749 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:8
2025-01-27 14:42:11,749 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`MARA-LOUISE ANZALONE`)-[r]->(end:`STARBUCKS`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"organization, legal case"', 'weight': 16.0, 'description': '"Starbucks is the subject of a labor law case decided by Mara-Louise Anzalone."', 'source_id': 'chunk-7be7c8f84d242316ca1e5a6e35fcdbde'}
2025-01-27 14:42:11,750 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`BOARD`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,752 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STARBUCKS`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,752 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:3
2025-01-27 14:42:11,753 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`CIRCUMSTANCES`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:3
2025-01-27 14:42:11,755 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`LAWS AND REGULATIONS`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,764 - lightrag - DEBUG - get_edge:query:
            MATCH (start:`CIRCUMSTANCES`)-[r]->(end:`STATEMENT`)
            RETURN properties(r) as edge_properties
            LIMIT 1
            :result:{'keywords': '"cause and effect, evidence-based"', 'weight': 9.0, 'description': '"The statement is related to the circumstances, indicating a connection between the two."', 'source_id': 'chunk-fc4172b8e3687bd549241baf9be9166a'}
2025-01-27 14:42:11,765 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`UNION ACTIVITY`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:2
2025-01-27 14:42:11,765 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:4
2025-01-27 14:42:11,770 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STATEMENT`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:5
2025-01-27 14:42:11,771 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:7
2025-01-27 14:42:11,771 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STATEMENT`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:5
2025-01-27 14:42:11,771 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:7
2025-01-27 14:42:11,771 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STATEMENT`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:5
2025-01-27 14:42:11,772 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:8
2025-01-27 14:42:11,772 - lightrag - DEBUG - node_degree:query:
                MATCH (n:`STATEMENT`)
                RETURN COUNT{ (n)--() } AS totalEdgeCount
            :result:5
2025-01-27 14:42:11,772 - lightrag - DEBUG - edge_degree:query:src_Degree+trg_degree:result:7
2025-01-27 14:42:11,772 - lightrag - INFO - Local query uses 5 entites, 9 relations, 3 text units
2025-01-27 14:42:11,779 - lightrag - DEBUG - ===== Query Input to LLM =====
2025-01-27 14:42:11,779 - lightrag - DEBUG - Query: What happened to starbucks?
2025-01-27 14:42:11,779 - lightrag - DEBUG - System prompt: ---Role---

You are a helpful assistant responding to questions about data in the tables provided.


---Goal---

Generate a response of the target length and format that responds to the user's question, considering both the conversation history and the current query. Summarize all information in the input data tables appropriate for the response length and format, and incorporating any relevant general knowledge.
If you don't know the answer, just say so. Do not make anything up.
Do not include information where the supporting evidence for it is not provided.

When handling relationships with timestamps:
1. Each relationship has a "created_at" timestamp indicating when we acquired this knowledge
2. When encountering conflicting relationships, consider both the semantic content and the timestamp
3. Don't automatically prefer the most recently created relationships - use judgment based on the context
4. For time-specific queries, prioritize temporal information in the content before considering creation timestamps

---Conversation History---


---Target response length and format---

Multiple Paragraphs

---Data tables---


-----Entities-----
```csv
id,	entity,	type,	description,	rank
1,	"MARA-LOUISE ANZALONE","PERSON","Mara-Louise Anzalone is an administrative law judge involved in the case regarding Starbucks and union activity.",3
2,	"STARBUCKS","ORGANIZATION","Starbucks is a company at the center of a labor law case regarding union activity and employee rewards.",2
3,	"FEDERAL LABOR LAW","CATEGORY","federal labor law is a set of regulations that governs labor practices.",2
4,	"UNION ACTIVITY","CATEGORY","union activity refers to the actions taken by employees to form or join a labor union.",2
5,	"BOARD","ORGANIZATION","Board refers to the governing body that oversees labor law.",2
6,	"EMPLOYEES","PERSON","employees are the workers at Starbucks who are affected by the labor law case.",1
7,	"CASE","EVENT","case refers to the labor law dispute between Starbucks and its employees.",0
8,	"STATEMENT","EVENT","Statement is an event where the Cyberspace Administration of China (CAC) has announced the firm's breach of laws and regulations."<SEP>"statement is the source of the information, indicating its importance in the context.",5
```
-----Relationships-----
```csv
id,	source,	target,	description,	keywords,	weight,	rank,	created_at
1,	"MARA-LOUISE ANZALONE","STARBUCKS","Starbucks is the subject of a labor law case decided by Mara-Louise Anzalone.","organization, legal case",16.0,5,2025-01-27 14:37:45
2,	"FEDERAL LABOR LAW","MARA-LOUISE ANZALONE","Mara-Louise Anzalone is involved in enforcing federal labor law in the case against Starbucks.","person, legal enforcement",7.0,5,2025-01-27 14:37:45
3,	"MARA-LOUISE ANZALONE","UNION ACTIVITY","Mara-Louise Anzalone is involved in a case regarding union activity at Starbucks.","person, labor dispute",6.0,5,2025-01-27 14:37:45
4,	"BOARD","FEDERAL LABOR LAW","The Board oversees federal labor law, which is relevant to the case against Starbucks.","organization, regulatory body",8.0,4,2025-01-27 14:37:45
5,	"BOARD","UNION ACTIVITY","The Board is involved in regulating union activity, which is relevant to the case against Starbucks.","organization, labor regulation",7.0,4,2025-01-27 14:37:45
6,	"EMPLOYEES","STARBUCKS","Starbucks employees are involved in the labor law case regarding union activity.","organization, labor dispute",9.0,3,2025-01-27 14:37:45
7,	CIRCUMSTANCES,STATEMENT,"The statement is related to the circumstances, indicating a connection between the two.","cause and effect, evidence-based",9.0,8,UNKNOWN
8,	EVIDENCE,STATEMENT,"The statement is related to the evidence, indicating a connection between the two.","cause and effect, evidence-based",7.0,8,UNKNOWN
9,	LAWS AND REGULATIONS,STATEMENT,"The statement is related to the laws and regulations, indicating a connection between the two.","cause and effect, evidence-based",8.0,7,UNKNOWN
10,	NATURE,STATEMENT,"The statement is related to the nature, indicating a connection between the two.","cause and effect, evidence-based",8.0,7,UNKNOWN
11,	CYBERSPACE ADMINISTRATION OF CHINA (CAC),STATEMENT,"Cyberspace Administration of China (CAC) has made a Statement announcing the firm's breach of laws and regulations.","announcement, regulatory breach",7.0,7,UNKNOWN
12,	MARA-LOUISE ANZALONE,STARBUCKS,"Starbucks is the subject of a labor law case decided by Mara-Louise Anzalone.","organization, legal case",16.0,5,UNKNOWN
13,	MARA-LOUISE ANZALONE,UNION ACTIVITY,"Mara-Louise Anzalone is involved in a case regarding union activity at Starbucks.","person, labor dispute",6.0,5,UNKNOWN
14,	BOARD,UNION ACTIVITY,"The Board is involved in regulating union activity, which is relevant to the case against Starbucks.","organization, labor regulation",7.0,4,UNKNOWN
15,	EMPLOYEES,STARBUCKS,"Starbucks employees are involved in the labor law case regarding union activity.","organization, labor dispute",9.0,3,UNKNOWN
```
-----Sources-----
```csv
id,	content
1,	The issue at the heart of this case is whether, under current Board law, [Starbucks] was entitled to explicitly reward employees' for not participating in union activity, 'while falsely telling its workers that the federal labor law forced it to take this action, wrote administrative law judge Mara-Louise Anzalone. It was not.
2,	of laws and regulations are clear, the evidence is conclusive, the circumstances are serious, and the nature is vile, the statement added.
3,	The Cyberspace Administration of China (CAC) said in a statement that the firm had breached the country's cybersecurity law, data security law, and personal information protection law.
'The facts of violations of laws and regulations are clear, the evidence is conclusive, the circumstances are serious, and the nature is vile, the statement added.
```


Add sections and commentary to the response as appropriate for the length and format. Style the response in markdown. Ensure the response maintains continuity with the conversation history.
2025-01-27 14:42:11,779 - lightrag - DEBUG - Full context:
2025-01-27 14:42:32,921 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 14:42:32,922 - lightrag - INFO - Load KV llm_response_cache with 2 data
2025-01-27 14:42:32,922 - lightrag - INFO - Load KV full_docs with 3 data
2025-01-27 14:42:32,922 - lightrag - INFO - Load KV text_chunks with 3 data
2025-01-27 14:42:33,285 - lightrag - INFO - Connected to neo4j at neo4j+ssc://a58d5521.databases.neo4j.io
2025-01-27 14:42:33,288 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 14:42:33,288 - lightrag - INFO - All documents have been processed or are duplicates
2025-01-27 15:28:26,258 - lightrag - INFO - Load KV json_doc_status_storage with 0 data
2025-01-27 15:28:26,260 - lightrag - INFO - Load KV llm_response_cache with 2 data
2025-01-27 15:28:26,260 - lightrag - INFO - Load KV full_docs with 3 data
2025-01-27 15:28:26,261 - lightrag - INFO - Load KV text_chunks with 3 data
2025-01-27 15:28:26,732 - lightrag - INFO - Connected to neo4j at neo4j+ssc://a58d5521.databases.neo4j.io
2025-01-27 15:28:26,734 - lightrag - INFO - Loaded document status storage with 3 records
2025-01-27 15:28:26,734 - lightrag - INFO - All documents have been processed or are duplicates
